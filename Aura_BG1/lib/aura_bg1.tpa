COPY ~%MOD_FOLDER%/2da~ ~override~
COPY ~%MOD_FOLDER%/audio~ ~override~
COPY ~%MOD_FOLDER%/bams~ ~override~
COPY ~%MOD_FOLDER%/portraits~ ~override~
COPY ~%MOD_FOLDER%/eff~ ~override~
COPY ~%MOD_FOLDER%/spells~ ~override~

APPEND ~STATE.IDS~ // adds custom IsValidForPartyDialogue state
  ~0x80101FEF CD_STATE_NOTVALID~
  UNLESS ~CD_STATE_NOTVALID~
  
// BAELOTH BANTER

ACTION_IF FILE_EXISTS_IN_GAME ~neera.dlg~ THEN BEGIN
 PRINT ~BG:EE detected - Baeloth interdia.2da append - set Baeloth's banter file (BBAELOTH)~
    APPEND ~interdia.2da~ ~BAELOTH BBAELOTH~
    UNLESS ~BAELOTH~
   ACTION_IF NOT (FILE_EXISTS_IN_GAME ~BBAELOTH.dlg~) THEN BEGIN
   COMPILE ~%MOD_FOLDER%/dialogue/BBAELOTHFix.d~
  END
END

// PVRZ-based bams

ACTION_FOR_EACH bamFile IN ~c0amaskc.bam~ ~c0muffyc.bam~ ~c0amagac.bam~ ~c02asunc.bam~ ~c0spikec.bam~ BEGIN
    COPY ~%MOD_FOLDER%/bams/%bamFile%~ ~override~
      LPF UPDATE_PVRZ_INDICES RET original_base_index new_base_index END
    ACTION_IF (original_base_index >= 0 AND new_base_index >= 0) BEGIN
      LAF INSTALL_PVRZ
      INT_VAR
        original_base_index = original_base_index
        new_base_index = new_base_index
      STR_VAR
        source_file = EVAL ~%MOD_FOLDER%/pvrz/mos%original_base_index%.pvrz~
      END
    END
END

// AUTOMATON ANIMATIONS

// Internally used: Animation slots reserved by vanilla or mod-added game creatures (in hexadecimal format)
// Mods with fixed animation slots that are currently considered:
// - Bearwalker + extended Werebear animation
// - Pack Mule
OUTER_TEXT_SPRINT animationSlots ~"0410" "1000" "1003" "1004" "1100" "1101" "1102" "1103" "1104" "1105" "1200" "1201" "1202" "1203" "1204" "1205" "1206" "1207" "1208" "1300" "2000" "2100" "2200" "2300" "3000" "3001" "4000" "4001" "4002" "4010" "4012" "4100" "4101" "4102" "4110" "4112" "4200" "4300" "4400" "4410" "4500" "4600" "4700" "4710" "4800" "5000" "5001" "5002" "5003" "5010" "5011" "5012" "5013" "5100" "5101" "5102" "5103" "5110" "5111" "5112" "5113" "5200" "5201" "5202" "5210" "5211" "5212" "5300" "5301" "5302" "5303" "5310" "5311" "5312" "5313" "6000" "6001" "6002" "6003" "6004" "6005" "6010" "6011" "6012" "6013" "6014" "6015" "6100" "6101" "6102" "6103" "6104" "6105" "6110" "6111" "6112" "6113" "6114" "6115" "6200" "6201" "6202" "6204" "6205" "6210" "6211" "6212" "6214" "6215" "6300" "6301" "6302" "6303" "6304" "6305" "6310" "6311" "6312" "6313" "6314" "6315" "6400" "6401" "6402" "6403" "6404" "6405" "6406" "6500" "6510" "6621" "7000" "7001" "7100" "7101" "7200" "7201" "7202" "7203" "7300" "7301" "7302" "7310" "7311" "7312" "7313" "7314" "7320" "7321" "7400" "7401" "7402" "7500" "7501" "7600" "7601" "7602" "7603" "7604" "7700" "7701" "7702" "7703" "7800" "7801" "7802" "7900" "7901" "7902" "7903" "7904" "7a00" "7a01" "7a02" "7a03" "7a04" "7b00" "7b01" "7b02" "7b03" "7b04" "7b05" "7b06" "7c00" "7c01" "7d00" "7d01" "7d02" "7d03" "7d04" "7d05" "7d06" "7d07" "7d08" "7e00" "7e01" "7f00" "7f01" "7f02" "7f03" "7f04" "7f05" "7f06" "7f07" "7f08" "7f09" "7f0a" "7f0b" "7f0c" "7f0d" "7f0e" "7f0f" "7f10" "7f11" "7f12" "7f13" "7f14" "7f15" "7f16" "7f17" "7f18" "7f19" "7f20" "7f21" "7f22" "7f23" "7f24" "7f27" "7f28" "7f29" "7f2a" "7f2b" "7f2c" "7f2d" "7f2e" "7f2f" "7f30" "7f31" "7f32" "7f33" "7f34" "7f35" "7f36" "7f37" "7f38" "7f39" "7f3a" "7f3b" "7f3c" "7f3d" "7f3e" "7f3f" "7f40" "7f41" "7f42" "7f43" "7f44" "7f45" "7f46" "7f47" "7f48" "7f49" "7f4a" "7f4b" "7f4c" "7f4d" "7f4e" "7f4f" "7f50" "7f51" "7f52" "7f53" "7f54" "7f55" "7f56" "7f57" "7f58" "7f59" "7f5a" "7f5b" "7f5c" "7f5d" "7f5e" "7f5f" "7f60" "7f61" "7f62" "8000" "8100" "8200" "9000" "a000" "a100" "a200" "a201" "a202" "b000" "b100" "b200" "b210" "b300" "b310" "b400" "b410" "b500" "b510" "b600" "b610" "b700" "c000" "c100" "c200" "c300" "c400" "c500" "c600" "c610" "c700" "c710" "c800" "c810" "c900" "c910" "ca00" "ca10" "cb00" "cc00" "cc01" "cc02" "cc04" "d000" "d100" "d200" "d300" "d400" "e000" "e010" "e020" "e040" "e050" "e060" "e070" "e080" "e090" "e0a0" "e0b0" "e0c0" "e0d0" "e0e0" "e0f0" "e0f1" "e0f2" "e200" "e210" "e220" "e230" "e240" "e241" "e242" "e243" "e244" "e245" "e246" "e247" "e248" "e249" "e24a" "e24b" "e24c" "e24d" "e24e" "e24f" "e250" "e251" "e252" "e253" "e254" "e255" "e256" "e257" "e258" "e259" "e25a" "e25b" "e25c" "e25d" "e25e" "e25f" "e260" "e261" "e262" "e263" "e264" "e265" "e266" "e267" "e26a" "e26b" "e26d" "e26e" "e26f" "e270" "e271" "e272" "e273" "e274" "e276" "e279" "e27d" "e27e" "e27f" "e280" "e281" "e282" "e283" "e288" "e289" "e28a" "e28b" "e28c" "e28d" "e28e" "e28f" "e290" "e291" "e292" "e293" "e294" "e300" "e310" "e320" "e330" "e400" "e410" "e420" "e430" "e440" "e441" "e442" "e443" "e444" "e500" "e510" "e520" "e600" "e610" "e6fe" "e700" "e710" "e720" "e800" "e810" "e820" "e830" "e840" "e900" "e910" "ea00" "ea10" "ea20" "eb00" "eb10" "eb20" "ec00" "ec10" "ec20" "ed00" "ed10" "ed20" "ee00" "ee10" "ef10" "f000" "f001" "f002" "f003" "f004" "f005" "f006" "f007" "f008" "f009" "f00a" "f00b" "f00c" "f00d" "f00e" "f00f" "f010" "f011" "f012" "f013" "f014" "f015" "f016" "f017" "f018" "f019" "f01a" "f01b" "f01c" "f01d" "f01e" "f01f" "f020" "f021" "f022" "f023" "f024" "f025" "f026" "f027" "f028" "f029" "f02a" "f02b" "f02c" "f02d" "f02e" "f02f" "f030" "f031" "f032" "f033" "f034" "f035" "f036" "f037" "f038" "f039" "f03a" "f03b" "f03c" "f03d" "f03e" "f03f" "f040" "f041" "f042" "f043" "f044" "f045" "f046" "f047" "f048" "f049" "f04a" "f04b" "f04c" "f04d" "f04e" "f04f" "f050" "f051" "f052" "f053" "f054" "f055" "f056" "f057" "f058" "f059" "f05a" "f05b" "f05c" "f05d" "f05e" "f05f" "f060" "f061" "f062" "f100" "f101" "f22e" "f80e"~

/**
 * Patch function. Returns the first free creature animation slot in the range defined by slotMin and slotMax.
 * INT_VAR slotMin    Lowest available creature animation slot for the animation, inclusive. (Default: 0)
 * INT_VAR slotMax    Highest available creature animation slot for the animation, exclusive.
 *                    (Default: highest value for slot type indicated by "slotMin")
 * INT_VAR slotSteps  How many slots to skip after each iteration, starting from slotMin.
 *                    Setting this parameter is useful if compatible animation slots are always 
 *                    a fixed distance apart (e.g. at a distance of 0x10 each). (Default: 1)
 * RET slot           A free animation slot. Returns -1 if none are found in the given range.
 */
DEFINE_PATCH_FUNCTION FIND_FREE_ANIM_SLOT
INT_VAR
  slotMin   = 0
  slotMax   = (slotMin BAND 0xf000) + 0x1000
  slotSteps = 1
RET
  slot
BEGIN
  SET slot = "-1"
  SET slotSteps = (slotSteps < 1) ? 1 : slotSteps
  SET slotMin = (slotMin < 0) ? 0 : slotMin
  SET slotMax = (slotMax < 0) ? 0 : slotMax
  PATCH_IF (slotMax < slotMin) BEGIN
    SET tmp = slotMin
    SET slotMin = slotMax
    SET slotMax = tmp
  END

  INNER_PATCH ~%animationSlots%~ BEGIN
    FOR (idx = slotMin; idx < slotMax; idx += slotSteps) BEGIN
      LOOKUP_IDS_SYMBOL_OF_INT name ~animate~ idx
      PATCH_IF (~%name%~ STR_EQ ~%idx%~) BEGIN
        LPF TO_HEX_NUMBER INT_VAR value = idx minDigits = 4 RET hexNumber END
        PATCH_IF (NOT FILE_EXISTS_IN_GAME ~%hexNumber%.ini~ AND 
                  ~%slotList%~ STRING_CONTAINS_REGEXP ~"%hexNumber%"~ != 0) BEGIN
          SET slot = idx
          SET idx = slotMax
        END
      END
    END
  END
END

// Action version of FIND_FREE_ANIM_SLOT
DEFINE_ACTION_FUNCTION FIND_FREE_ANIM_SLOT
INT_VAR
  slotMin   = 0
  slotMax   = (slotMin BAND 0xf000) + 0x1000
  slotSteps = 1
RET
  slot
BEGIN
  OUTER_PATCH ~~ BEGIN
    LPF FIND_FREE_ANIM_SLOT
    INT_VAR
      slotMin = slotMin
      slotMax = slotMax
      slotSteps = slotSteps
    RET
      slot
    END
  END
END

// Small Automaton

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xefff RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_AURA_AUTOMATON~ UNLESS ~C0_AURA_AUTOMATON~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/automaton_small/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/automaton_small~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xefff RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_AURA_AUTOMATON_JADE~ UNLESS ~C0_AURA_AUTOMATON_JADE~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/automaton_small_jade/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/automaton_small_jade~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xefff RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_AURA_AUTOMATON_BLACK~ UNLESS ~C0_AURA_AUTOMATON_BLACK~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/automaton_small_black/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/automaton_small_black~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

// Large Automaton

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xefff RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_AURA_AUTOMATON_LARGE~ UNLESS ~C0_AURA_AUTOMATON_LARGE~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/automaton_large/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/automaton_large~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xefff RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_AURA_AUTOMATON_LARGE_JADE~ UNLESS ~C0_AURA_AUTOMATON_LARGE_JADE~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/automaton_large_jade/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/automaton_large_jade~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

ACTION_IF (NOT GAME_IS_BGEE) BEGIN
  LAF FIND_FREE_ANIM_SLOT INT_VAR slotMin = 0xe000 slotMax = 0xefff RET slot END
  ACTION_IF (slot <= 0) BEGIN
    FAIL ~No free creature animation slot found.~ // No free creature animation slot found.
  END

  LAF TO_HEX_NUMBER INT_VAR value = slot minDigits = 4 RET hexNumber END
  APPEND ~animate.ids~ ~0x%hexNumber% C0_AURA_AUTOMATON_LARGE_BLACK~ UNLESS ~C0_AURA_AUTOMATON_LARGE_BLACK~
  CLEAR_IDS_MAP

  COPY ~%MOD_FOLDER%/animations/automaton_large_black/exxx.ini~ ~override/%hexNumber%.ini~

  ACTION_BASH_FOR ~%MOD_FOLDER%/animations/automaton_large_black~ ~^.+\.bam$~ BEGIN
    COPY ~%BASH_FOR_FILESPEC%~ ~override~
  END
END

// Initializing user-defined status icons for shot abilities (EE-only)
ACTION_IF (GAME_IS ~bgee bg2ee eet~) BEGIN
  COPY_EXISTING ~STATDESC.2DA~ ~override~
    SET icon_index = 82
    COUNT_2DA_COLS numCols
    PATCH_IF (numCols > 2) BEGIN
      READ_2DA_ENTRIES_NOW ~tbl_items~ numCols
      FOR (row = 0; row < tbl_items; ++row) BEGIN
        READ_2DA_ENTRY_FORMER ~tbl_items~ row 0 cur_idx
        PATCH_IF (cur_idx > icon_index) BEGIN
          SET icon_index = cur_idx
        END
      END
      PATCH_IF (icon_index > 82) BEGIN
        // Note: Adding rows in reverse order since 2DA functions don't update max. rows internally
        DEFINE_ASSOCIATIVE_ARRAY icon_defs BEGIN 
          1003 => ~c0aicon4~
          1002 => ~c0aicon3~
          1001 => ~c0aicon2~
          1000 => ~c0aicon1~
        END
        SET cur_index = icon_index + 4
        PHP_EACH icon_defs AS ref => icn_name BEGIN
          SET cur_strref = RESOLVE_STR_REF((AT ref))
          TEXT_SPRINT icon_row ~%cur_index%        %cur_strref%          %icn_name%~
          INSERT_2DA_ROW tbl_items numCols ~%icon_row%~
          SET cur_index -= 1
        END
        INNER_ACTION BEGIN
          COPY ~%MOD_FOLDER%/bams/c0aicon1.bam~ ~override~
          COPY ~%MOD_FOLDER%/bams/c0aicon2.bam~ ~override~
          COPY ~%MOD_FOLDER%/bams/c0aicon3.bam~ ~override~
          COPY ~%MOD_FOLDER%/bams/c0aicon4.bam~ ~override~
        END
      END
    END
END ELSE BEGIN
  OUTER_SET icon_index = 82
END

//AUDIO

LAF HANDLE_AUDIO END

// JOURNAL

ADD_JOURNAL TITLE (@10000) @10001 @10002 @10003 @10004 @10005 @10006 @10007 @10008 USING ~%MOD_FOLDER%/translations/english/setup.tra~
ADD_JOURNAL TITLE (@20000) @20001 @20002 USING ~%MOD_FOLDER%/translations/english/setup.tra~

// DIALOGUE

  COMPILE ~%MOD_FOLDER%/dialogue/c0auin2.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0auin3.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0auin4.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0aualch.d~
  COMPILE ~%MOD_FOLDER%/dialogue/bc0aura.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0aura.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0auraj.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0aurap.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0saito.d~
  COMPILE ~%MOD_FOLDER%/dialogue/c0fubuki.d~

// Aura-Sirene
ACTION_IF FILE_EXISTS_IN_GAME ~bc0aura.dlg~ AND FILE_EXISTS_IN_GAME ~bc0siren.dlg~
THEN BEGIN
  PRINT ~Adding crossmod banters between Aura and Sirene~
COMPILE ~%MOD_FOLDER%/dialogue/crossmod/sirene.d~
END
  
// Aura-Drake
ACTION_IF FILE_EXISTS_IN_GAME ~bc0aura.dlg~ AND FILE_EXISTS_IN_GAME ~bc0drake.dlg~
THEN BEGIN
  PRINT ~Adding crossmod banters between Aura and Drake~
COMPILE ~%MOD_FOLDER%/dialogue/crossmod/drake.d~
END

// Aura-Verr
ACTION_IF FILE_EXISTS_IN_GAME ~bc0aura.dlg~ AND FILE_EXISTS_IN_GAME ~l#1verrb.dlg~
THEN BEGIN
  PRINT ~Adding crossmod banters between Aura and Verr'Sza~
COMPILE ~%MOD_FOLDER%/dialogue/crossmod/verrsza.d~
END

// Aura-White
ACTION_IF FILE_EXISTS_IN_GAME ~bc0aura.dlg~ AND FILE_EXISTS_IN_GAME ~V#1WHIB.dlg~
THEN BEGIN
  PRINT ~Adding crossmod banters between Aura and White~
COMPILE ~%MOD_FOLDER%/dialogue/crossmod/white.d~
END

// SCRIPTS

  EXTEND_TOP ~ar0112.bcs~ ~%MOD_FOLDER%/scripts/ar0112.baf~
  EXTEND_TOP ~ar0900.bcs~ ~%MOD_FOLDER%/scripts/ar0900.baf~
  EXTEND_TOP ~ar3300.bcs~ ~%MOD_FOLDER%/scripts/ar3300.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0aura.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0aurad.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0ausumm.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0auin2.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0auin3.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0auin4.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0aualch.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0acuts0.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0acuts1.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0acuts2.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0acuts3.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0acuts4.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0aangry.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0areset.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0aufade.baf~
  COMPILE ~%MOD_FOLDER%/scripts/c0ninja3.baf~

// PROJECTILES

ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj1.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj2.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj3.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj4.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj5.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj6.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj7.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj8.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj9.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aproj0.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0auaro1.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0auaro2.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0auaro3.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0auaro4.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0achain.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0athund.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aburst.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0asvoid.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0aarea1.PRO~

COPY ~%MOD_FOLDER%/spells/c0achain.pro~ ~override~
WRITE_SHORT 0x21A ~c0auaro2~

// SPELLS

COPY ~%MOD_FOLDER%/spells/c0aukt1.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0aukt2.spl~ ~override~

COPY ~%MOD_FOLDER%/spells/c0auin1.2da~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auin1.spl~ ~override~
SAY NAME1 ~Set Alchemical Snare~
SAY NAME2 ~Set Alchemical Snare~
SAY UNIDENTIFIED_DESC ~Set Alchemical Snare
Set a trap in the targeted location when no hostile creatures are in sight. Traps deal 1d4 (+1 extra damage per level) fire, cold, acid or electrical damage of the artificer's choice in a 10' radius, inflicting additional effects that last for 1 round per 3 levels of the artificer. Effects are dependent on the chosen element. Alchemical Snares can be set at a distance but can be set off by both allies and enemies.

  ALCHEMIST'S FIRE: Ignites the victim, dealing 1d4 damage per round.
  RAPID FREEZE: Slows the victim.
  ACIDIC COMPOUND: Corrodes the victim's armor, reducing their AC by 4 and physical resistance by 20%.
  ELECTRIC CHARGE: Afflicts the victim with a 50% chance to miscast magic.~

ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0atrap1.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0atrap2.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0atrap3.PRO~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0atrap4.PRO~

COPY ~%MOD_FOLDER%/spells/c0atrap1.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0atrap1%~
END
COPY ~%MOD_FOLDER%/spells/c0atrap5.spl~ ~override~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      opcode = 142
	  target = 2
	  timing = 0
	  duration = 6
	  parameter2 = (icon_index + 3)
END
COPY ~%MOD_FOLDER%/spells/c0auin1a.spl~ ~override~
SAY NAME1 ~Set Alchemical Trap: Alchemist's Fire~
SAY NAME2 ~Set Alchemical Trap: Alchemist's Fire~

COPY ~%MOD_FOLDER%/spells/c0atrap2.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0atrap2%~
END
COPY ~%MOD_FOLDER%/spells/c0atrap6.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auin1b.spl~ ~override~
SAY NAME1 ~Set Alchemical Trap: Rapid Freezing Reagent~
SAY NAME2 ~Set Alchemical Trap: Rapid Freezing Reagent~

COPY ~%MOD_FOLDER%/spells/c0atrap3.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0atrap3%~
END
COPY ~%MOD_FOLDER%/spells/c0atrap7.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auin1c.spl~ ~override~
SAY NAME1 ~Set Alchemical Trap: Corrosive Acidic Compound~
SAY NAME2 ~Set Alchemical Trap: Corrosive Acidic Compound~

COPY ~%MOD_FOLDER%/spells/c0atrap4.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0atrap4%~
END
COPY ~%MOD_FOLDER%/spells/c0atrap8.spl~ ~override~
      LPF ALTER_EFFECT
      INT_VAR
        match_opcode      = 142   // Display portrait icon
        match_parameter2  = 1    // Called Shot icon
        parameter2        = 105
      END
COPY ~%MOD_FOLDER%/spells/c0auin1d.spl~ ~override~
SAY NAME1 ~Set Alchemical Trap: Conductive Fluid~
SAY NAME2 ~Set Alchemical Trap: Conductive Fluid~

COPY ~%MOD_FOLDER%/spells/c0auin2.spl~ ~override~
SAY NAME1 ~Craft Rune~
SAY NAME2 ~Craft Rune~
SAY UNIDENTIFIED_DESC ~Craft Rune
Artificers can inscribe runes with arcane magic, allowing them to use a limited variety of spells. The amount and strength of runes created depend on the artificer's level.

Runes may not be crafted during combat.~

COPY ~%MOD_FOLDER%/spells/c0auin2.cre~ ~override~
SAY NAME1 ~Runecrafting~
SAY NAME2 ~Runecrafting~
  WRITE_ASCII 0x2cc ~c0auin2~ #8   //pre-joining dialogue file
  
COPY_EXISTING ~spwi103.spl~ ~override/c0rune1a.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune1a.itm~ ~override~
SAY NAME1 ~Minor Fire Rune~
SAY NAME2 ~Minor Fire Rune~
SAY DESC ~This minor fire rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Burning Hands once
- If used on an automaton, grants +1 enchantment bonus and +1d2 fire damage to attacks.~
  
COPY_EXISTING ~spwi117.spl~ ~override/c0rune1b.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END

COPY ~%MOD_FOLDER%/spells/c0rune1b.itm~ ~override~
SAY NAME1 ~Minor Ice Rune~
SAY NAME2 ~Minor Ice Rune~
SAY DESC ~This minor ice rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Chill Touch once
- If used on an automaton, grants a cold aura that lowers nearby enemies' Armor Class, THAC0 and damage by one point each.~

COPY_EXISTING ~spwi112.spl~ ~override/c0rune1c.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune1c.itm~ ~override~
SAY NAME1 ~Minor Arcane Rune~
SAY NAME2 ~Minor Arcane Rune~
SAY DESC ~This minor arcane rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Magic Missile once
- If used on an automaton, grants +10% magic resistance and absorption of one spell of 2nd level or lower.~
  
COPY_EXISTING ~spwi120.spl~ ~override/c0rune1d.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune1d.itm~ ~override~
SAY NAME1 ~Minor Illusion Rune~
SAY NAME2 ~Minor Illusion Rune~
SAY DESC ~This minor illusion rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Reflected Image once
- If used on an automaton, grants the effects of Reflected Image.~

COPY_EXISTING ~spwi115.spl~ ~override/c0rune1e.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune1e.itm~ ~override~
SAY NAME1 ~Minor Lightning Rune~
SAY NAME2 ~Minor Lightning Rune~
SAY DESC ~This minor lightning rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Shocking Grasp once
- If used on an automaton, restores 30% of its maximum hit points and grants it a lightning bolt for its next attack dealing 3d6+3 electrical damage to all targets in a line.~
  
COPY_EXISTING ~spwi114.spl~ ~override/c0rune1f.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune1f.itm~ ~override~
SAY NAME1 ~Minor Shield Rune~
SAY NAME2 ~Minor Shield Rune~
SAY DESC ~This minor shield rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Shield once
- If used on an automaton, grants +2 to Armor Class against all weapons.~

COPY_EXISTING ~spwi217.spl~ ~override/c0rune2a.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2a.itm~ ~override~
SAY NAME1 ~Lesser Fire Rune~
SAY NAME2 ~Lesser Fire Rune~
SAY DESC ~This lesser fire rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Agannazar's Scorcher once
- If used on an automaton, grants +2 enchantment bonus and +1d4 fire damage to attacks.~

COPY_EXISTING ~spwi214.spl~ ~override/c0rune2b.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2b.itm~ ~override~
SAY NAME1 ~Lesser Strength Rune~
SAY NAME2 ~Lesser Strength Rune~
SAY DESC ~This lesser strength rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Strength once
- If used on an automaton, grants +2 to THAC0 and damage.~

COPY_EXISTING ~spwi201.spl~ ~override/c0rune2c.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2c.itm~ ~override~
SAY NAME1 ~Lesser Illusion Rune~
SAY NAME2 ~Lesser Illusion Rune~
SAY DESC ~This lesser illusion rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Blur once
- If used on an automaton, grants the effects of Blur.~

COPY_EXISTING ~spwi224.spl~ ~override/c0rune2d.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2d.itm~ ~override~
SAY NAME1 ~Lesser Dust Rune~
SAY NAME2 ~Lesser Dust Rune~
SAY DESC ~This lesser dust rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Glitterdust once
- If used on an automaton, grants one use of Dust Particle Breath, reducing all nearby creatures' Armor Class and THAC0 by four points.~

COPY_EXISTING ~spwi304.spl~ ~override/c0rune2e.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2e.itm~ ~override~
SAY NAME1 ~Fire Rune~
SAY NAME2 ~Fire Rune~
SAY DESC ~This fire rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Fireball once
- If used on an automaton, grants +3 enchantment bonus and +1d6 fire damage to attacks.~

COPY_EXISTING ~spwi308.spl~ ~override/c0rune2f.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2f.itm~ ~override~
SAY NAME1 ~Lightning Rune~
SAY NAME2 ~Lightning Rune~
SAY DESC ~This lightning rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Lightning Bolt once
- If used on an automaton, restores +50% of its maximum hit points and grants it lightning bolts for its next three attacks dealing 3d6+3 electrical damage to all targets in a line.~

COPY_EXISTING ~spwi312.spl~ ~override/c0rune2g.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2g.itm~ ~override~
SAY NAME1 ~Time Rune~
SAY NAME2 ~Time Rune~
SAY DESC ~This time rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Slow once
- If used on an automaton, grants the effects of Haste.~

COPY_EXISTING ~spwi307.spl~ ~override/c0rune2h.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune2h.itm~ ~override~
SAY NAME1 ~Illusion Rune~
SAY NAME2 ~Illusion Rune~
SAY DESC ~This illusion rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Invisibility 10' Radius once
- If used on an automaton, grants the effects of Mirror Image.~

COPY_EXISTING ~spwi418.spl~ ~override/c0rune3a.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune3a.itm~ ~override~
SAY NAME1 ~Greater Fire Rune~
SAY NAME2 ~Greater Fire Rune~
SAY DESC ~This greater fire rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Fireshield (Red) once
- If used on an automaton, grants +4 enchantment bonus and +1d8 fire damage to attacks.~

COPY_EXISTING ~spwi408.spl~ ~override/c0rune3b.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune3b.itm~ ~override~
SAY NAME1 ~Greater Earth Rune~
SAY NAME2 ~Greater Earth Rune~
SAY DESC ~This greater earth rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Stoneskin once
- If used on an automaton, grants +30% physical resistance.~

COPY_EXISTING ~spwi406.spl~ ~override/c0rune3c.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune3c.itm~ ~override~
SAY NAME1 ~Greater Arcane Rune~
SAY NAME2 ~Greater Arcane Rune~
SAY DESC ~This greater arcane rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Minor Globe of Invulnerability once
- If used on an automaton, grants +30% magic resistance and absorption of two spells of 4th level or lower.~

COPY_EXISTING ~spwi405.spl~ ~override/c0rune3d.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune3d.itm~ ~override~
SAY NAME1 ~Greater Illusion Rune~
SAY NAME2 ~Greater Illusion Rune~
SAY DESC ~This greater illusion rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Improved Invisibility once
- If used on an automaton, grants the effects of Improved Invisibility.~

COPY_EXISTING ~spwi424.spl~ ~override/c0rune3e.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune3e.itm~ ~override~
SAY NAME1 ~Greater Scrying Rune~
SAY NAME2 ~Greater Scrying Rune~
SAY DESC ~This greater scrying rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Farsight once
- If used on an automaton, grants increased vision range and ability to attack invisible creatures.~

COPY_EXISTING ~spwi414.spl~ ~override/c0rune3f.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune3f.itm~ ~override~
SAY NAME1 ~Greater Shield Rune~
SAY NAME2 ~Greater Shield Rune~
SAY DESC ~This greater shield rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Spirit Armor once
- If used on an automaton, grants +4 to Armor Class against all weapons.~

COPY_EXISTING ~spwi523.spl~ ~override/c0rune4a.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune4a.itm~ ~override~
SAY NAME1 ~Perfect Fire Rune~
SAY NAME2 ~Perfect Fire Rune~
SAY DESC ~This perfect fire rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Sunfire once
- If used on an automaton, grants +5 enchantment bonus and +1d10 fire damage to attacks.~

COPY_EXISTING ~spwi503.spl~ ~override/c0rune4b.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune4b.itm~ ~override~
SAY NAME1 ~Perfect Ice Rune~
SAY NAME2 ~Perfect Ice Rune~
SAY DESC ~This perfect ice rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Cone of Cold once
- If used on an automaton, grants a cold aura that lowers nearby enemies' Armor Class, THAC0 and damage by three points each.~

COPY_EXISTING ~spwi513.spl~ ~override/c0rune4c.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune4c.itm~ ~override~
SAY NAME1 ~Perfect Arcane Rune~
SAY NAME2 ~Perfect Arcane Rune~
SAY DESC ~This perfect arcane rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Breach once
- If used on an automaton, grants +40% magic resistance and absorption of three spells of 6th level or lower.~

COPY_EXISTING ~spwi515.spl~ ~override/c0rune4d.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune4d.itm~ ~override~
SAY NAME1 ~Perfect Scrying Rune~
SAY NAME2 ~Perfect Scrying Rune~
SAY DESC ~This perfect scrying rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Oracle once
- If used on an automaton, grants increased vision range and ability to attack invisible creatures. Attacks dispel illusions on hit.~

COPY_EXISTING ~spwi510.spl~ ~override/c0rune4e.spl~
WRITE_SHORT 0x1C 4 
WRITE_LONG 0x34 1 
READ_LONG 0x64 "offset_abil"
READ_SHORT 0x68 "num_abil"
READ_ASCII ("%offset_abil%" + 0x04) "bam" 
WRITE_EVALUATED_ASCII 0x3A "%bam%" 
WHILE (0 < "%num_abil%")
BEGIN
SET "num_abil" = ("%num_abil%" - 1)
END
COPY ~%MOD_FOLDER%/spells/c0rune4e.itm~ ~override~
SAY NAME1 ~Perfect Shield Rune~
SAY NAME2 ~Perfect Shield Rune~
SAY DESC ~This perfect shield rune was crafted by an artificer. Arcane runes have the ability to cast a specific stored spell or provide temporary enhancements to an automaton.

STATISTIC:
- May cast Spell Immunity once
- If used on an automaton, grants +8 to Armor Class against all weapons.~

COPY ~%MOD_FOLDER%/spells/c0aualc.spl~ ~override~
SAY NAME1 ~Advanced Alchemy~
SAY NAME2 ~Advanced Alchemy~
SAY UNIDENTIFIED_DESC ~Advanced Alchemy
Lantanese artificers are exceptionally skilled in chemistry and potion-making. This skill may be used once per day to craft a number of potions or alchemical weapons equal to half of the artificer's level. The types of potions available for crafting increase with the artificer's level.~

COPY ~%MOD_FOLDER%/spells/c0auin2.cre~ ~override/c0aualch.cre~
SAY NAME1 ~Alchemy~
SAY NAME2 ~Alchemy~
  WRITE_ASCII 0x248 ~c0aualch~ #8  //override script
  WRITE_ASCII 0x280 ~c0aualch~ #32  //DV
  WRITE_ASCII 0x2cc ~c0aualch~ #8   //pre-joining dialogue file
  WRITE_ASCII 0x268 ~c0aualch~ #8   //default
  
COPY ~%MOD_FOLDER%/items/c0aualc1.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0aualc2.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0aualc3.spl~ ~override~
  
COPY ~%MOD_FOLDER%/items/c0aualc1.sto~ ~override/c0aualc1.sto~
SAY 0xc ~Alchemy - Standard Potions~
  
COPY ~%MOD_FOLDER%/items/c0aualc1.sto~ ~override/c0aualc2.sto~
SAY 0xc ~Alchemy - Advanced Potions~
   
COPY ~%MOD_FOLDER%/items/c0aualc1.sto~ ~override/c0aualc3.sto~
SAY 0xc ~Alchemy - Explosives~
  
// POTIONS

COPY ~%MOD_FOLDER%/items/c0apot01.spl~ ~override~
SAY NAME1 ~Potion of Renewal~
SAY NAME2 ~Potion of Renewal~
COPY ~%MOD_FOLDER%/items/c0apot01.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Renewal~
SAY NAME2 ~Lantanese Potion of Renewal~
SAY DESC ~This potion is composed of several exotic medicinal herbs and alchemical ingredients, giving it significant healing properties.

STATISTICS:

Special: Restores 30% of maximum Hit Points and cures all poisons and diseases.

Weight: 1~
WRITE_LONG 0x34 500
 
COPY ~%MOD_FOLDER%/items/c0apot02.spl~ ~override~
SAY NAME1 ~Potion of Fire Resistance~
SAY NAME2 ~Potion of Fire Resistance~
COPY ~%MOD_FOLDER%/items/c0apot02.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Fire Resistance~
SAY NAME2 ~Lantanese Potion of Fire Resistance~
SAY DESC ~This exotic potion provides the imbiber with a significant resistance to heat. Those who drink this potion would be capable of leaping through a wall of flame without suffering the slightest injury.

STATISTICS:

Fire Resistance: +100%
Special: Fire Resistance decreases by 10% per round to a minimum of 50% after 5 rounds.
Duration: 2 hours

Weight: 1~
WRITE_LONG 0x34 550

COPY ~%MOD_FOLDER%/items/c0apot03.spl~ ~override~
SAY NAME1 ~Potion of Cold Resistance~
SAY NAME2 ~Potion of Cold Resistance~
COPY ~%MOD_FOLDER%/items/c0apot03.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Cold Resistance~
SAY NAME2 ~Lantanese Potion of Cold Resistance~
SAY DESC ~This potion was designed for Lantanese researchers to allow them to survive at near-fatally low temperatures while experimenting with certain cold-dwelling creatures or plants. Those who drink this potion find themselves in a state of perpetual warmth.

STATISTICS:

Cold Resistance: +100%
Special: Cold Resistance decreases by 10% per round to a minimum of 50% after 5 rounds.
Duration: 2 hours

Weight: 1~
WRITE_LONG 0x34 550

COPY ~%MOD_FOLDER%/items/c0apot04.spl~ ~override~
SAY NAME1 ~Philter of Health~
SAY NAME2 ~Philter of Health~
COPY ~%MOD_FOLDER%/items/c0apot04.itm~ ~override~
SAY NAME1 ~Lantanese Philter of Health~
SAY NAME2 ~Lantanese Philter of Health~
SAY DESC ~This phial contains a highly nutritious and energy-rich liquid, designed to allow travellers to go on long journeys without the need for food or rest for an entire day.

STATISTICS:

Maximum Hit Points: +10%
Special: Removes fatigue
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 600

COPY ~%MOD_FOLDER%/items/c0apot05.spl~ ~override~
SAY NAME1 ~Potion of Invisibility~
SAY NAME2 ~Potion of Invisibility~
COPY ~%MOD_FOLDER%/items/c0apot05.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Invisibility~
SAY NAME2 ~Lantanese Potion of Invisibility~
SAY DESC ~The natives of Lantan are known for being relatively pacifistic and prefer to avoid conflict wherever possible. To this end, their potions of invisibility are among the most popular of their alchemical creations, as it allows them to escape nearly any situation completely unscathed.

STATISTICS:

Special: Invisibility and Non-Detection
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 750

COPY ~%MOD_FOLDER%/items/c0apot06.spl~ ~override~
SAY NAME1 ~Trollblood Extract~
SAY NAME2 ~Trollblood Extract~
COPY ~%MOD_FOLDER%/items/c0apot06.itm~ ~override~
SAY NAME1 ~Lantanese Trollblood Extract~
SAY NAME2 ~Lantanese Trollblood Extract~
SAY DESC ~As foul-looking as this liquid appears to be, it has the undeniably effective property of bestowing its drinker with cellular regeneration of shocking rates. However, the concoction also temporarily bestows some of the weaknesses of trollkin as a result.

STATISTICS:

Fire Resistance: -50%
Acid Resistance: -50%
Special: Regenerate two hit points per second
Duration: 5 rounds

Weight: 1~
WRITE_LONG 0x34 1000

COPY ~%MOD_FOLDER%/items/c0apot07.spl~ ~override~
SAY NAME1 ~Tonic of Alertness~
SAY NAME2 ~Tonic of Alertness~
COPY ~%MOD_FOLDER%/items/c0apot07.itm~ ~override~
SAY NAME1 ~Lantanese Tonic of Alertness~
SAY NAME2 ~Lantanese Tonic of Alertness~
SAY DESC ~This strongly-scented potion puts its drinker into a state of constant and total awareness, to the point where they can hear the slightest movement and practically see out of the back of their heads.

STATISTICS:

Dexterity: +1
Find Traps: +25%
Detect Illusions: +25%
Special: Immunity to backstab
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 1000

COPY ~%MOD_FOLDER%/items/c0apot08.spl~ ~override~
SAY NAME1 ~Elixir of Harmony~
SAY NAME2 ~Elixir of Harmony~
COPY ~%MOD_FOLDER%/items/c0apot08.itm~ ~override~
SAY NAME1 ~Lantanese Elixir of Harmony~
SAY NAME2 ~Lantanese Elixir of Harmony~
SAY DESC ~This powerful potion subscribes to the principle of "the best offense is a good defense". The drinker becomes nearly invulnerable to physical harm, yet finds their own blows significantly weakened in return.

STATISTICS:

Armor Class: +6
Physical Resistance: +50%
Special: Damage output is reduced by 50%
Duration: 5 rounds

Weight: 1~
WRITE_LONG 0x34 1200

COPY ~%MOD_FOLDER%/items/c0apot09.spl~ ~override~
SAY NAME1 ~Potion of Antimagic~
SAY NAME2 ~Potion of Antimagic~
COPY ~%MOD_FOLDER%/items/c0apot09.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Antimagic~
SAY NAME2 ~Lantanese Potion of Antimagic~
SAY DESC ~This powerful potion expunges all traces of magic from its imbiber and prevents them from being affected by all but the most powerful spells until its effects dissipate.

STATISTICS:

Magic Resistance: +50%
Special: Immunity to spells of 5th level and below, all spell effects are removed from the imbiber and <PRO_HESHE> may not cast spells for the duration.
Duration: 2 rounds

Weight: 1~
WRITE_LONG 0x34 1350

COPY ~%MOD_FOLDER%/items/c0apot10.spl~ ~override~
SAY NAME1 ~Potion of Equanimity~
SAY NAME2 ~Potion of Equanimity~
COPY ~%MOD_FOLDER%/items/c0apot10.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Equanimity~
SAY NAME2 ~Lantanese Potion of Equanimity~
SAY DESC ~This potion clears the drinker's mind of distracting and inhibiting thoughts, allowing them to think and act with greater efficiency. Their hand-eye coordination is also significantly improved as a result.

STATISTICS:

Special: Prevents feeblemind, confusion, fear, and charm
Intelligence: +4
Dexterity: +4
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 1200

COPY ~%MOD_FOLDER%/items/c0apot11.spl~ ~override~
SAY NAME1 ~Oil of Speed~
SAY NAME2 ~Oil of Speed~
COPY ~%MOD_FOLDER%/items/c0apot11.itm~ ~override~
SAY NAME1 ~Lantanese Oil of Speed~
SAY NAME2 ~Lantanese Oil of Speed~
SAY DESC ~This oil, when applied on the user, hastens their actions greatly, doubling their movement and combat capacities. However, this does not reduce spellcasting time.

STATISTICS:

Special: Doubles movement and attack rates
Duration: 1 turn

Weight: 1~
WRITE_LONG 0x34 400

COPY ~%MOD_FOLDER%/items/c0apot12.spl~ ~override~
SAY NAME1 ~Potion of Invulnerability~
SAY NAME2 ~Potion of Invulnerability~
COPY ~%MOD_FOLDER%/items/c0apot12.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Invulnerability~
SAY NAME2 ~Lantanese Potion of Invulnerability~
SAY DESC ~This potion confers very high resistance to all attacks while giving bonuses to all Saving Throws. Unlike regular Potions of Invulnerability, this potion can be used by those of any profession.

STATISTICS:

Armor Class: +2
Saving Throws: +5
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 1400

COPY ~%MOD_FOLDER%/items/c0apot13.spl~ ~override~
SAY NAME1 ~Philter of Luck~
SAY NAME2 ~Philter of Luck~
COPY ~%MOD_FOLDER%/items/c0apot13.itm~ ~override~
SAY NAME1 ~Lantanese Philter of Luck~
SAY NAME2 ~Lantanese Philter of Luck~
SAY DESC ~Also known informally as 'liquid luck', this gold-colored liquid provides the drinker with an sense of temporary luck and confidence, as though nothing could go wrong.

STATISTICS:

Saving Throws: +2
Find Traps: +10%
Pick Pockets: +10%
Move Silently: +10%
Hide In Shadows: +10%
Detect Illusion: +10%
Set Traps: +10%
Luck: +2
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 1500

COPY ~%MOD_FOLDER%/items/c0apot14.spl~ ~override~
SAY NAME1 ~Elixir of Restoration~
SAY NAME2 ~Elixir of Restoration~
COPY ~%MOD_FOLDER%/items/c0apot14.itm~ ~override~
SAY NAME1 ~Lantanese Elixir of Restoration~
SAY NAME2 ~Lantanese Elixir of Restoration~
SAY DESC ~This elixir was designed and patented by the Lantanese priesthood of Gond. Concocted from several restorative ingredients and a dash of holy water, it is effective against the draining touch of vampires and wights.

STATISTICS:

Special: Restores lost levels
Duration: Permanent

Weight: 1~
WRITE_LONG 0x34 250

COPY ~%MOD_FOLDER%/items/c0apot15.spl~ ~override~
SAY NAME1 ~Potion of Freedom~
SAY NAME2 ~Potion of Freedom~
COPY ~%MOD_FOLDER%/items/c0apot15.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Freedom~
SAY NAME2 ~Lantanese Potion of Freedom~
SAY DESC ~This potion acts like the spell Free Action when consumed. The drinker becomes completely immune to any effects that influence action or movement, whether it is magical in origin or not.

STATISTICS:

Special: Free Action
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 750

COPY ~%MOD_FOLDER%/items/c0apot16.spl~ ~override~
SAY NAME1 ~Elixir of Lifeshield~
SAY NAME2 ~Elixir of Lifeshield~
COPY ~%MOD_FOLDER%/items/c0apot16.itm~ ~override~
SAY NAME1 ~Lantanese Elixir of Lifeshield~
SAY NAME2 ~Lantanese Elixir of Lifeshield~
SAY DESC ~This elixir was designed and patented by the Lantanese priesthood of Gond. The drinker's soul becomes protected by magical energies, preventing it from being separated from their body through unnatural means.

STATISTICS:

Special: Death Ward
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 900

COPY ~%MOD_FOLDER%/items/c0apot17.spl~ ~override~
SAY NAME1 ~Elixir of Might~
SAY NAME2 ~Elixir of Might~
COPY ~%MOD_FOLDER%/items/c0apot17.itm~ ~override~
SAY NAME1 ~Lantanese Elixir of Might~
SAY NAME2 ~Lantanese Elixir of Might~
SAY DESC ~This elixir was concocted from a combination of various ingredients including giants' blood. When imbibed, the drinker's strength increases dramatically.

STATISTICS:

Strength: +2
Duration: 1 hour

Weight: 1~
WRITE_LONG 0x34 1000

COPY ~%MOD_FOLDER%/items/c0apot18.spl~ ~override~
SAY NAME1 ~Thrym Extract~
SAY NAME2 ~Thrym Extract~
COPY ~%MOD_FOLDER%/items/c0apot18.itm~ ~override~
SAY NAME1 ~Lantanese Thrym Extract~
SAY NAME2 ~Lantanese Thrym Extract~
SAY DESC ~This thick liquid is harvested and distilled from the glands of dead polar worms.  It is the substance that helps keep the huge creatures warm in the desolate north.  Drinking the liquid straight from the creature's body is almost always fatal, so alchemists attempt to distill the substance until it is relatively safe to consume.  Even in its current state, however, it can still be deadly.

STATISTICS:

Special: Imbiber takes 8d6 fire damage (Save vs. Death at -4 for half damage) in exchange for immunity to cold damage and +3 to Strength and Dexterity
Duration: 1 turn

Weight: 1~
WRITE_LONG 0x34 1200

COPY ~%MOD_FOLDER%/items/c0apot19.spl~ ~override~
SAY NAME1 ~Potion of Etherealness~
SAY NAME2 ~Potion of Etherealness~
COPY ~%MOD_FOLDER%/items/c0apot19.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Etherealness~
SAY NAME2 ~Lantanese Potion of Etherealness~
SAY DESC ~This potion is composed of ectoplasm and dust from will-o'-wisps. The drinker takes on some of their ghostly properties, temporarily becoming ethereal.

STATISTICS:

Special: Imbiber becomes ethereal for 5 rounds. While in this state <PRO_HESHE> is immune to normal weapons and gains 20% magic resistance. Spells and weapons may still be used.
Duration: 1 turn

Weight: 1~
WRITE_LONG 0x34 1500

COPY ~%MOD_FOLDER%/items/c0apot20.spl~ ~override~
SAY NAME1 ~Elixir of Focus~
SAY NAME2 ~Elixir of Focus~
COPY ~%MOD_FOLDER%/items/c0apot20.itm~ ~override~
SAY NAME1 ~Lantanese Elixir of Focus~
SAY NAME2 ~Lantanese Elixir of Focus~
SAY DESC ~This potion temporarily sharpens the drinker's senses to their absolute limit, making them feel as if time has stopped for a brief duration. However, they will find it nearly impossible to take action during this state.

STATISTICS:

Special: Imbiber may move freely for one round while others are frozen in time. The imbiber may not attack or use spells while in this state.
Duration: 1 round

Weight: 1~
WRITE_LONG 0x34 1500

COPY ~%MOD_FOLDER%/items/c0apot21.spl~ ~override~
SAY NAME1 ~Potion of Life Transference~
SAY NAME2 ~Potion of Life Transference~
COPY ~%MOD_FOLDER%/items/c0apot21.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Life Transference~
SAY NAME2 ~Lantanese Potion of Life Transference~
SAY DESC ~This dangerous potion sacrifices vitality for power. The drinker finds <PRO_HISHER> strength dramatically increased at the cost of their health.

STATISTICS:

Strength: +6
Maximum Hit Points: -50%
Duration: 8 hours

Weight: 1~
WRITE_LONG 0x34 3000

COPY ~%MOD_FOLDER%/items/c0apot22.spl~ ~override~
SAY NAME1 ~Philter of Arcane Barrier~
SAY NAME2 ~Philter of Arcane Barrier~
COPY ~%MOD_FOLDER%/items/c0apot22.itm~ ~override~
SAY NAME1 ~Lantanese Philter of Arcane Barrier~
SAY NAME2 ~Lantanese Philter of Arcane Barrier~
SAY DESC ~This potion causes the drinker's very skin itself to repel magical energies, making them all but immune to the majority of spells. However, they may still cast their own spells if they so choose.

STATISTICS:

Damage Resistance: +75% against all forms of magical non-physical damage
Special: All Saving Throws are automatically successful
Duration: 3 turns

Weight: 1~
WRITE_LONG 0x34 3000

COPY ~%MOD_FOLDER%/spells/c0auto.itm~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auto2.itm~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auto1.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auto2.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auto3.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0ausumm.cre~ ~override~
COPY ~%MOD_FOLDER%/spells/c0auin3.spl~ ~override~
SAY NAME1 ~Craft Automaton~
SAY NAME2 ~Craft Automaton~
SAY UNIDENTIFIED_DESC ~Craft Automaton
The artificer spends two rounds to assimilate a powerful automaton which can be controlled at will. Automatons last until destroyed and cannot be controlled but will defend their creators, are disabled if their creator is incapacitated, lose control if their creator's mind is affected and fall apart if their creator is killed.

Only one automaton can be controlled at any given time.~

COPY ~%MOD_FOLDER%/spells/c0auin3a.cre~ ~override~
  WRITE_ASCII 0X34 ~ABronzL~ #8   //small portrait
SAY NAME1 ~Bronze Automaton~
SAY NAME2 ~Bronze Automaton~
WRITE_ASCII 0x2cc ~c0auin3~  #8  // dialogue
  WRITE_ASCII 0x280 ~c0auin3~ #32  //DV
    WRITE_LONG 0x28 (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON~))

COPY ~%MOD_FOLDER%/spells/c0auin3b.cre~ ~override~
  WRITE_ASCII 0X34 ~ABronzL~ #8   //small portrait
SAY NAME1 ~Bronze Automaton~
SAY NAME2 ~Bronze Automaton~
WRITE_ASCII 0x2cc ~c0auin3~  #8  // dialogue
  WRITE_ASCII 0x280 ~c0auin3~ #32  //DV
    WRITE_LONG 0x28 (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON~))

COPY ~%MOD_FOLDER%/spells/c0auin3c.cre~ ~override~
  WRITE_ASCII 0X34 ~AJadeL~ #8   //small portrait
SAY NAME1 ~Jade Automaton~
SAY NAME2 ~Jade Automaton~
WRITE_ASCII 0x2cc ~c0auin3~  #8  // dialogue
  WRITE_ASCII 0x280 ~c0auin3~ #32  //DV
    WRITE_LONG 0x28 (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON_JADE~))

COPY ~%MOD_FOLDER%/spells/c0auin3d.cre~ ~override~
  WRITE_ASCII 0X34 ~ABlackL~ #8   //small portrait
SAY NAME1 ~Black Automaton~
SAY NAME2 ~Black Automaton~
WRITE_ASCII 0x2cc ~c0auin3~  #8  // dialogue
  WRITE_ASCII 0x280 ~c0auin3~ #32  //DV
    WRITE_LONG 0x28 (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON_BLACK~))
COPY ~%MOD_FOLDER%/spells/c0auin4.spl~ ~override~
SAY NAME1 ~Craft Wand~
SAY NAME2 ~Craft Wand~
SAY UNIDENTIFIED_DESC ~Craft Wand
The master artificer may use this ability to craft one of the following wands with limited charges per day:

- Wand of Fire
- Wand of Frost
- Wand of Lightning
- Wand of Paralyzation
- Wand of Polymorphing
- Wand of the Heavens
- Wand of Cloudkill
- Wand of Spell Striking
- Wand of Cursing
- Wand of Wonder
- Rod of Resurrection~
COPY ~%MOD_FOLDER%/spells/c0auin2.cre~ ~override/c0auin4.cre~
SAY NAME1 ~Wandcrafting~
SAY NAME2 ~Wandcrafting~
  WRITE_ASCII 0x248 ~c0auin4~ #8  //override script
  WRITE_ASCII 0x280 ~c0auin4~ #32  //DV
  WRITE_ASCII 0x2cc ~c0auin4~ #8   //pre-joining dialogue file
  WRITE_ASCII 0x268 ~c0auin4~ #8   //default
COPY ~%MOD_FOLDER%/spells/c0auin5.spl~ ~override~
SAY NAME1 ~Master Alchemist~
SAY NAME2 ~Master Alchemist~
SAY UNIDENTIFIED_DESC ~Master Alchemist
The master artificer may access a completely new level of alchemy, gaining the ability to craft Potions of Divine Might, Potions of Complete Healing, Potions of True Sight and Potions of Hardiness with their Advanced Alchemy ability. They also gain the ability to craft a single Potion of Ultimate Mastery once in their lifetime.~

COPY ~%MOD_FOLDER%/items/c0apoth1.itm~ ~override~
SAY NAME1 ~Lantanese Elixir of Divine Might~
SAY NAME2 ~Lantanese Elixir of Divine Might~
SAY DESC ~Elixirs of Divine Might increase the imbiber's Strength, Dexterity and Constitution by four points each for ten rounds.~
WRITE_LONG 0x34 7500

COPY ~%MOD_FOLDER%/items/c0apoth2.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Complete Healing~
SAY NAME2 ~Lantanese Potion of Complete Healing~
SAY DESC ~Potions of Complete Healing are the ultimate healing potion, fully restoring the imbiber's hit points and curing all diseases, poisons and mental injuries.~
WRITE_LONG 0x34 7500

COPY ~%MOD_FOLDER%/items/c0apoth3.itm~ ~override~
SAY NAME1 ~Lantanese Philter of Truth~
SAY NAME2 ~Lantanese Philter of Truth~
SAY DESC ~Philters of Truth allow the imbiber to see through and dispel all illusions in their line of sight for ten rounds.~
WRITE_LONG 0x34 7500

COPY ~%MOD_FOLDER%/items/c0apoth4.itm~ ~override~
SAY NAME1 ~Lantanese Tonic of Hardiness~
SAY NAME2 ~Lantanese Tonic of Hardiness~
SAY DESC ~Tonics of Hardiness toughen the imbiber's skin to the hardness of steel, providing 40% resistance to physical damage for ten rounds.~
WRITE_LONG 0x34 7500

COPY ~%MOD_FOLDER%/items/c0apoth5.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Permanent Ability Increase~)
  END
SAY NAME1 ~Ultimate Mastery~
COPY ~%MOD_FOLDER%/items/c0apoth5.itm~ ~override~
SAY NAME1 ~Lantanese Potion of Ultimate Mastery~
SAY NAME2 ~Lantanese Potion of Ultimate Mastery~
SAY DESC ~A Potion of Ultimate Mastery permanently enhances the imbiber's skills in their chosen profession.

   - Mages and Bards gain +1 to Intelligence.
   - Clerics and Druids gain +1 to Wisdom.
   - Thieves and Monks gain +1 to Dexterity.
   - Fighters, Rangers and Paladins gain +1 to Strength.
   - Sorcerers and Shamans gain +1 to Constitution.
   - Spellcasting classes take precedence over warrior classes.
   - Arcane classes take precedence over divine classes.~
WRITE_LONG 0x34 15000

// STORE

COPY ~%MOD_FOLDER%/spells/c0autinv.sto~ ~override~
SAY 0xc ~Clockwork Servant Automaton~

COPY ~%MOD_FOLDER%/spells/c0autos1.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
	  resist_dispel = 0
      timing = 9
  END
COPY ~%MOD_FOLDER%/spells/c0autos2.spl~ ~override~
SAY NAME1 ~Activate: Barrier Sphere~
SAY NAME2 ~Activate: Barrier Sphere~
SAY UNIDENTIFIED_DESC ~Barrier Sphere
With this ability, the automaton activates a device which causes it to surround the target with a protective Sphere of energy, rendering her unable to interact with the outside world and vice versa, as per the spell Otiluke's Resilient Sphere. Unlike the spell, this ability is not magical in nature and is thus not affected by magic resistance, but the automaton is unable to act so long as it continues to charge the Sphere. This ability may be deactivated at will.

Enemies may make a save vs. breath at -3 to avoid being trapped by the Sphere.~
COPY ~%MOD_FOLDER%/spells/c0autos3.spl~ ~override~
  LPF ADD_SPELL_CFEFFECT
    INT_VAR
      opcode = 139
	  target = 1
	  timing = 4
	  duration = 24
	  parameter1 = RESOLVE_STR_REF (~Barrier Sphere Ready~)
END
SAY NAME1 ~Deactivate: Barrier Sphere~
SAY NAME2 ~Deactivate: Barrier Sphere~
SAY UNIDENTIFIED_DESC ~Barrier Sphere
Use this ability to deactivate Barrier Sphere.~
COPY ~%MOD_FOLDER%/spells/c0autos4.spl~ ~override~
SAY NAME1 ~Activate: Enlarge~
SAY NAME2 ~Activate: Enlarge~
SAY UNIDENTIFIED_DESC ~Enlarge
With this ability, the automaton activates an internal device which causes it to become magically enlarged for one turn, altering its stats:
  - +5 to THAC0
  - +30% to Damage
  - -6 penalty to Armor Class
  - +40% Physical Resistance~
COPY ~%MOD_FOLDER%/spells/c0autos5.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 53
	  parameter1 = (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON_LARGE~))
END
COPY ~%MOD_FOLDER%/spells/c0autos5.spl~ ~override/c0autos6.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 53
	  parameter1 = (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON_LARGE_JADE~))
END
COPY ~%MOD_FOLDER%/spells/c0autos5.spl~ ~override/c0autos7.spl~
  LPF ALTER_EFFECT
    INT_VAR
      match_opcode = 53
	  parameter1 = (IDS_OF_SYMBOL (~animate~ ~C0_AURA_AUTOMATON_LARGE_BLACK~))
END
COPY ~%MOD_FOLDER%/spells/c0autos8.spl~ ~override~
  LPF ADD_SPELL_CFEFFECT
    INT_VAR
      opcode = 139
	  target = 1
	  timing = 4
	  duration = 120
	  parameter1 = RESOLVE_STR_REF (~Static Burst Ready~)
END
SAY NAME1 ~Activate: Static Burst~
SAY NAME2 ~Activate: Static Burst~
SAY UNIDENTIFIED_DESC ~Static Burst
With this ability, the automaton activates an internal device which releases a colossal burst of static electricity, dealing 12d6 electrical damage (Save vs. Breath Weapons at -4 for half damage)~
COPY ~%MOD_FOLDER%/spells/c0autos9.spl~ ~override~
COPY ~%MOD_FOLDER%/spells/c0autosa.spl~ ~override~
SAY NAME1 ~Activate: Self-Destruct~
SAY NAME2 ~Activate: Self-Destruct~
SAY UNIDENTIFIED_DESC ~Self-Destruct
With this ability, the automation activates an internal device which causes it to explode after one turn of channelling, dealing 24d6 damage (half fire, half electrical) and knocking all creatures unconscious and away from the automaton. This devastating explosion immediately destroys the automaton.~

COPY ~%MOD_FOLDER%/spells/c0afire1.spl~ ~override~
SAY NAME1 ~Augment: Fire I~
SAY NAME2 ~Augment: Fire I~
COPY ~%MOD_FOLDER%/spells/c0afire2.spl~ ~override~
SAY NAME1 ~Augment: Fire II~
SAY NAME2 ~Augment: Fire II~
COPY ~%MOD_FOLDER%/spells/c0afire3.spl~ ~override~
SAY NAME1 ~Augment: Fire III~
SAY NAME2 ~Augment: Fire III~
COPY ~%MOD_FOLDER%/spells/c0afire4.spl~ ~override~
SAY NAME1 ~Augment: Fire IV~
SAY NAME2 ~Augment: Fire IV~
COPY ~%MOD_FOLDER%/spells/c0afire5.spl~ ~override~
SAY NAME1 ~Augment: Fire V~
SAY NAME2 ~Augment: Fire V~
COPY ~%MOD_FOLDER%/spells/c0acold1.spl~ ~override~
SAY NAME1 ~Augment: Frost I~
SAY NAME2 ~Augment: Frost I~
COPY ~%MOD_FOLDER%/spells/c0acold2.spl~ ~override~
SAY NAME1 ~Augment: Frost II~
SAY NAME2 ~Augment: Frost II~
COPY ~%MOD_FOLDER%/spells/c0acold3.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Slowed~)
  END
COPY ~%MOD_FOLDER%/spells/c0acold4.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Slowed~)
  END
COPY ~%MOD_FOLDER%/spells/c0amagi1.spl~ ~override~
SAY NAME1 ~Augment: Arcane I~
SAY NAME2 ~Augment: Arcane I~
COPY ~%MOD_FOLDER%/spells/c0amagi2.spl~ ~override~
SAY NAME1 ~Augment: Arcane II~
SAY NAME2 ~Augment: Arcane II~
COPY ~%MOD_FOLDER%/spells/c0amagi3.spl~ ~override~
SAY NAME1 ~Augment: Arcane III~
SAY NAME2 ~Augment: Arcane III~
COPY ~%MOD_FOLDER%/spells/c0atime1.spl~ ~override~
SAY NAME1 ~Augment: Time~
SAY NAME2 ~Augment: Time~
COPY ~%MOD_FOLDER%/spells/c0astre1.spl~ ~override~
SAY NAME1 ~Augment: Strength~
SAY NAME2 ~Augment: Strength~
COPY ~%MOD_FOLDER%/spells/c0aligh1.spl~ ~override~
SAY NAME1 ~Augment: Lightning I~
SAY NAME2 ~Augment: Lightning I~
COPY ~%MOD_FOLDER%/spells/c0aligh2.spl~ ~override~
SAY NAME1 ~Augment: Lightning II~
SAY NAME2 ~Augment: Lightning II~
COPY ~%MOD_FOLDER%/spells/c0alight.itm~ ~override~
SAY NAME1 ~Lightning Bolt~
SAY NAME2 ~Lightning Bolt~
WRITE_SHORT 0x9C ~%c0athund%~
COPY ~%MOD_FOLDER%/spells/c0ashie1.spl~ ~override~
SAY NAME1 ~Augment: Shield I~
SAY NAME2 ~Augment: Shield I~
COPY ~%MOD_FOLDER%/spells/c0ashie2.spl~ ~override~
SAY NAME1 ~Augment: Shield II~
SAY NAME2 ~Augment: Shield II~
COPY ~%MOD_FOLDER%/spells/c0ashie3.spl~ ~override~
SAY NAME1 ~Augment: Shield III~
SAY NAME2 ~Augment: Shield III~
COPY ~%MOD_FOLDER%/spells/c0adust1.spl~ ~override~
SAY NAME1 ~Augment: Dust~
SAY NAME2 ~Augment: Dust~
ADD_PROJECTILE ~%MOD_FOLDER%/spells/c0adust.pro~
COPY ~%MOD_FOLDER%/spells/c0adust2.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Blinded~)
  END
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0adust%~
END
SAY NAME1 ~Dust Particle Breath~
SAY NAME2 ~Dust Particle Breath~
SAY UNIDENTIFIED_DESC ~Dust Particle Breath
The automaton breathes a cloud of glittering dust, blinding all creatures in an area of effect and reducing their Armor Class and THAC0 by four points for five rounds. This ability may only be used once and can only be regained through using another Dust Rune.~
COPY ~%MOD_FOLDER%/spells/c0ascry1.spl~ ~override~
SAY NAME1 ~Augment: Scrying I~
SAY NAME2 ~Augment: Scrying I~
COPY ~%MOD_FOLDER%/spells/c0ascry2.spl~ ~override~
SAY NAME1 ~Augment: Scrying II~
SAY NAME2 ~Augment: Scrying II~
COPY ~%MOD_FOLDER%/spells/c0ascryi.spl~ ~override~
SAY NAME1 ~Dispel Illusions~
SAY NAME2 ~Dispel Illusions~
COPY ~%MOD_FOLDER%/spells/c0aupgd1.spl~ ~override~

COPY ~%MOD_FOLDER%/spells/c0aubear.spl~ ~override~
SAY NAME1 ~I Hate Bears!~
SAY NAME2 ~I Hate Bears!~

COPY ~%MOD_FOLDER%/spells/c0acuts2.spl~ ~override~
SAY NAME1 ~Dragon Arrow~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0aproj1%~
END
SAY NAME2 ~Dragon Arrow~

// CREATURES
  
APPEND ~pdialog.2da~
~C0Aura        C0AuraP	C0AuraJ	C0AuraD~
UNLESS ~C0Aura~

APPEND ~interdia.2da~
~C0Aura       BC0Aura C0AuraEE~
UNLESS ~C0Aura~

COPY ~%MOD_FOLDER%/creatures/c0ninja.cre~ ~override~
WRITE_ASCII 0x248 ~c0ninja~  #8  // override
WRITE_ASCII 0x2cc ~c0ninja~  #8  // dialogue
WRITE_ASCII 0x280 ~c0ninja~ #32 // death variable
SAY NAME1 ~Ninja~
SAY NAME2 ~Ninja~

COPY ~%MOD_FOLDER%/creatures/c0ninja2.cre~ ~override~
WRITE_ASCII 0x248 ~c0ninja~  #8  // override
WRITE_ASCII 0x2cc ~c0ninja~  #8  // dialogue
WRITE_ASCII 0x280 ~c0ninja2~ #32 // death variable
SAY NAME1 ~Elite Ninja~
SAY NAME2 ~Elite Ninja~

COPY ~%MOD_FOLDER%/creatures/c0ninja.cre~ ~override/c0ninja3.cre~
WRITE_ASCII 0x248 ~c0ninja3~  #8  // override
WRITE_ASCII 0x2cc ~c0ninja~  #8  // dialogue
WRITE_ASCII 0x280 ~c0ninja3~ #32 // death variable
SAY NAME1 ~Elite Ninja~
SAY NAME2 ~Elite Ninja~

COPY ~%MOD_FOLDER%/creatures/c0saito.cre~ ~override~
WRITE_ASCII 0x248 ~c0saito~  #8  // override
WRITE_ASCII 0x2cc ~c0saito~  #8  // dialogue
WRITE_ASCII 0x280 ~c0saito~ #32 // death variable
SAY NAME1 ~Tadahashi Saito~
SAY NAME2 ~Tadahashi Saito~

COPY ~%MOD_FOLDER%/creatures/c0fubuki.cre~ ~override~
WRITE_ASCII 0x248 ~c0fubuki~  #8  // override
WRITE_ASCII 0x2cc ~c0fubuki~  #8  // dialogue
WRITE_ASCII 0x280 ~c0fubuki~ #32 // death variable
SAY NAME1 ~Fubuki~
SAY NAME2 ~Fubuki~

COPY ~%MOD_FOLDER%/creatures/c0aukagu.cre~ ~override~
WRITE_ASCII 0x248 ~c0aukagu~  #8  // override
WRITE_ASCII 0x2cc ~c0aukagu~  #8  // dialogue
WRITE_ASCII 0x280 ~c0aukagu~ #32 // death variable
SAY NAME1 ~Kagutsuchi~
SAY NAME2 ~Kagutsuchi~

COPY ~%MOD_FOLDER%/creatures/c0auayak.cre~ ~override~
WRITE_ASCII 0x248 ~c0auayak~  #8  // override
WRITE_ASCII 0x2cc ~c0auayak~  #8  // dialogue
WRITE_ASCII 0x280 ~c0auayak~ #32 // death variable
SAY NAME1 ~Ayakashi~
SAY NAME2 ~Ayakashi~

COPY ~%MOD_FOLDER%/creatures/c0aumizu.cre~ ~override~
WRITE_ASCII 0x248 ~c0aumizu~  #8  // override
WRITE_ASCII 0x2cc ~c0aumizu~  #8  // dialogue
WRITE_ASCII 0x280 ~c0aumizu~ #32 // death variable
SAY NAME1 ~Mizuchi~
SAY NAME2 ~Mizuchi~

COPY ~%MOD_FOLDER%/creatures/c0aukuon.cre~ ~override~
WRITE_ASCII 0x248 ~c0aukuon~  #8  // override
WRITE_ASCII 0x2cc ~c0aukuon~  #8  // dialogue
WRITE_ASCII 0x280 ~c0aukuon~ #32 // death variable
SAY NAME1 ~Ku'on Myodo~
SAY NAME2 ~Ku'on Myodo~

// ITEMS

COPY ~%MOD_FOLDER%/items/c0aule01.itm~ ~override~
SAY NAME1 ~Cherry-tinted Leather Armor~
SAY NAME2 ~Cherry-tinted Leather Armor~
SAY DESC ~This basic armor is made of thick wax or water-hardened leather. It is sturdy protection, not supple like boots or a cloak. Soft garment leathers like that would offer no more protection than common clothing. Magical enchantments have improved the protective abilities of this particular suit.

Aura's custom-made leather armor is dyed a bright pinkish red color that is, according to Aura, reminiscent of Kara-Turan cherry blossoms, designed to repel stains and unpleasant odors.

STATISTICS:

Equipped abilities:
- Save vs. Breath Weapons: +3

Armor Class: 7 (9 vs. piercing and missile)
Requires:
 4 Strength

Weight: 10~

COPY ~%MOD_FOLDER%/items/c0abadge.itm~ ~override~
SAY NAME1 ~Glimmershine Family Insignia~
SAY NAME2 ~Glimmershine Family Insignia~
SAY DESC ~This brass insignia is small enough to fit inside of your palm. Engraved upon it is the image of a vaguely sunflower-shaped emblem and letters of a strange language you can't understand. Along the edges are carved the words "Aurelia M. Glimmershine".~

COPY ~%MOD_FOLDER%/items/c0amaga1.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 180
	  target = 1
	  timing = 2
	  parameter1 = RESOLVE_STR_REF (~Aura refuses to equip this weapon.~)
	STR_VAR
	  resource = c0ausw01
END
SAY NAME1 ~Amulet~
SAY NAME2 ~Aura's Magatama~
SAY DESC ~This mysterious, curved stone is called a 'magatama'. Though you have never seen anything like it before, it is apparently a fairly common decorative design in its place of origin, Kara-Tur. These jewels are sometimes blessed by priestesses of the Way and carried as protective talismans against chaotic and malevolent spirits.

Aura's magatama is carved from a piece of green jade and was enchanted by the Kozakuran priestess Reika Amakagami, her mentor, and as such carries great sentimental value to her, so much that she is unwilling to ever remove it.

STATISTICS:

Equipped abilities:
- Saving Throws: +2
- All attacks made against the wearer by evil or chaotic creatures receive a -2 penalty to their attack roll and any saving throws caused by such attacks are made with a +2 bonus

Weight: 0~
OUTER_SET strref = RESOLVE_STR_REF (~Aura bats your hand away with the hint of a frown on her face. "Hey, hands off!"~ [GAM_47])
APPEND item_use.2da ~c0amaga1 Aura %strref% 3~

COPY ~%MOD_FOLDER%/items/c0amaga2.itm~ ~override~
SAY NAME1 ~Amulet~
SAY NAME2 ~<CHARNAME>'s Magatama~
SAY DESC ~This mysterious, curved stone is called a 'magatama'. Though you have never seen anything like it before, it is apparently a fairly common decorative design in its place of origin, Kara-Tur. These jewels are sometimes blessed by priestesses of the Way and carried as protective talismans against chaotic and malevolent spirits.

This magatama was by Aura created as a gift to <CHARNAME> using a small piece of red agate. While its material value is low, there is a sort of simple beauty to its design.

STATISTICS:

Equipped abilities:
- Saving Throws: +1
- All attacks made against the wearer by evil or chaotic creatures receive a -2 penalty to their attack roll and any saving throws caused by such attacks are made with a +2 bonus

Weight: 0~

COPY_EXISTING ~ITEMSPEC.2da~ ~override~
APPEND_FILE ~%MOD_FOLDER%/items/ITEMSPEC.txt~

COPY ~%MOD_FOLDER%/spells/c0asaku.spl~ ~override~
      LPF ALTER_EFFECT
      INT_VAR
        check_globals     = 0
        check_headers     = 1
        match_opcode      = 142   // Display portrait icon
        match_parameter2  = 82    // Called Shot icon
        parameter2        = (icon_index + 4)
      END
SAY NAME1 ~Amaterasu~
SAY NAME2 ~Amaterasu~

COPY ~%MOD_FOLDER%/items/c0auide2.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0aarea1%~
END
COPY ~%MOD_FOLDER%/items/c0auiden.spl~ ~override~
      LPF ALTER_EFFECT
      INT_VAR
        check_globals     = 0
        check_headers     = 1
        match_opcode      = 142   // Display portrait icon
        match_parameter2  = 82    // Called Shot icon
        parameter2        = (icon_index + 2)
      END
SAY NAME1 ~Reveal Magic~
COPY ~%MOD_FOLDER%/items/c0auiden.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Aura's Multipurpose Protective Goggles~
SAY NAME2 ~Aura's Multipurpose Protective Goggles~
SAY DESC ~Eyewear of this sort are mass-produced in Lantanese workshops, with specific designs made for archaeologists, botanists, alchemists and those of various other professions. Aura's particular pair has been customized, combining the functionalities of several different brands to assist her in her multidisciplinary line of work.

STATISTICS:

Charge abilities (three times per day):
- Identify
- Reveal Magic: Reveal all dispellable enchantments within 50' and gain +2 to attack rolls vs. arcane casters (bards, mages, sorcerers) for one turn

Equipped abilities:
- Find Traps: +20%
- Detect Illusions: +20%
- Protection from gaze attacks
- Immunity to blindness~

COPY ~%MOD_FOLDER%/items/c0muffy.itm~ ~override~
SAY NAME1 ~Muffy the Clockwork Squirrel~
SAY NAME2 ~Muffy the Clockwork Squirrel~
SAY DESC ~Muffy is a strange machine made of metal and clockwork that serves as Aura's pet. It has a strange degree of sentience, understanding human speech and exhibiting behaviour just like a real, living squirrel, to the point where its state as an animated construct is debatable. Aura claims to have crafted Muffy herself, though how she gave it life is a secret she keeps to herself.

Regardless of how it is able to act as though it were alive, Muffy is doubtlessly a useful creation - the squirrel's stomach is a hollow compartment capable of storing small objects such as gems, potions or keys. Though the act of opening up Muffy seems rather morbid, the squirrel seems rather happy to have its 'belly' filled with valuables.

STATISTICS:

Capacity: 40 items
Weight: 0~
OUTER_SET strref = RESOLVE_STR_REF (~Muffy scurries away in fear of you, its contents clattering as it runs. "Hey, get back here!" Aura sighs. "Hope he hasn't broken anything this time..."~ [GAM_48])
APPEND item_use.2da ~c0muffy Aura %strref% 3~

COPY ~%MOD_FOLDER%/items/c0muffy.sto~ ~override~
SAY 0xc ~Muffy~

COPY ~%MOD_FOLDER%/items/c0aubook.itm~ ~override~
SAY NAME1 ~Aura's Rune Book~
SAY NAME2 ~Aura's Rune Book~
SAY DESC ~This large metal-bound book is designed to hold runes and scrolls of all kind and protect them from all sorts of natural and magical hazards.

STATISTICS:

Capacity: 100
Weight: 0~

COPY ~%MOD_FOLDER%/items/c0aubook.sto~ ~override~
SAY 0xc ~Aura's Rune Book~

COPY ~%MOD_FOLDER%/items/c0axbow1.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~Paralyzed~)
END
SAY NAME1 ~Thunderbolt +6~
SAY NAME2 ~Thunderbolt +6~
SAY DESC ~This strange bronze-colored contraption appears to be some sort of launcher. Its creator and late owner, Liro Mideveningwalker, was an intelligent yet ambitious gnome, and often sought out mysteries and secrets in dangerous places to increase her own knowledge. Her inexperience in combat led her to design this powerful cannon as a means for self defense. This weapon fires deadly lightning bolts that can strike down anything in its path. Liro's creativity also led her to add a variety of other implements to make it more effective. However, the energy that powers the weapon is limited and requires proper tools to recharge after too many uses. Between the cannon's notable weight and complex mechanisms, only a select few would be capable of using it effectively.

STATISTICS:

Equipped abilities:
- Armor Class: +6 vs. melee weapons
- Attacks per round set to 2
- Increased visual range
- Electrical Resistance: +100%

Combat abilities:
- The Thunderbolt does not launch projectiles. Instead, it fires a ray of lightning which deals 6d6+10 (save vs. breath weapons for half) electrical damage to all creatures within its line of fire and paralyzes them for two rounds on a failed save vs. breath. All targets struck are also Magnetized (-2 to AC vs. missiles and -20% missile damage resistance) for five rounds. The Thunderbolt strikes as a +6 weapon and may be fired 80 times before needing to recharge.

Speed Factor: 5
Proficiency Type: None
Type: Two-handed
Requires:
 14 Strength
 17 Intelligence

Weight: 20~
WRITE_SHORT 0x9C ~%c0athund%~

COPY ~%MOD_FOLDER%/items/c0aubow.spl~ ~override~
SAY NAME1 ~Create Sunshooter Arrows~
SAY NAME2 ~Create Sunshooter Arrows~

COPY ~%MOD_FOLDER%/items/c0aubow1.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Sunshooter I~
SAY NAME2 ~Sunshooter I~
SAY DESC ~The Sunshooter is Aura's personal weapon, a metallic bow of unusual design that fires arrows with almost inhuman speed and accuracy. Various attachments decorate the arc of the bow, some useful (such as enchantments that alter the effects of nocked arrows) and others purely for accessory. Its complexity is so great that no one besides its creator is likely capable of understanding how to properly wield it.

STATISTICS:

Charge abilities (1x/day):
- Create five Healing Arrows per day

Combat abilities:
- Magnetism: Each hit reduces target's armor class vs. ranged weapons by 1 for 5 rounds

THAC0: +1
Speed Factor: 2
Proficiency Type: Shortbow
Type: Two-handed
Requires:
 6 Strength

Weight: 2~

COPY ~%MOD_FOLDER%/items/c0aubow2.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Sunshooter II~
SAY NAME2 ~Sunshooter II~
SAY DESC ~The Sunshooter is Aura's personal weapon, a metallic bow of unusual design that fires arrows with almost inhuman speed and accuracy. Various attachments decorate the arc of the bow, some useful (such as enchantments that alter the effects of nocked arrows) and others purely for accessory. Its complexity is so great that no one besides its creator is likely capable of understanding how to properly wield it.

STATISTICS:

Charge abilities (1x/day):
- Create ten Healing Arrows per day

Combat abilities:
- Magnetism: Each hit reduces target's armor class vs. ranged weapons by 1 and missile resistance by 3% for 5 rounds

THAC0: +2
Speed Factor: 1
Proficiency Type: Shortbow
Type: Two-handed
Requires:
 6 Strength

Weight: 2~

COPY ~%MOD_FOLDER%/items/c0aubow3.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Sunshooter III~
SAY NAME2 ~Sunshooter III~
SAY DESC ~The Sunshooter is Aura's personal weapon, a metallic bow of unusual design that fires arrows with almost inhuman speed and accuracy. Various attachments decorate the arc of the bow, some useful (such as enchantments that alter the effects of nocked arrows) and others purely for accessory. Its complexity is so great that no one besides its creator is likely capable of understanding how to properly wield it.

STATISTICS:

Charge abilities (1x/day):
- Create ten Healing Arrows and two Lightning Arrows per day

Combat abilities:
- Magnetism: Each hit reduces target's armor class vs. ranged weapons by 1 and missile resistance by 3% for 5 rounds

THAC0: +2
Speed Factor: 1
Proficiency Type: Shortbow
Type: Two-handed
Requires:
 6 Strength

Weight: 2~

COPY ~%MOD_FOLDER%/items/c0aubow4.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Sunshooter IV~
SAY NAME2 ~Sunshooter IV~
SAY DESC ~The Sunshooter is Aura's personal weapon, a metallic bow of unusual design that fires arrows with almost inhuman speed and accuracy. Various attachments decorate the arc of the bow, some useful (such as enchantments that alter the effects of nocked arrows) and others purely for accessory. Its complexity is so great that no one besides its creator is likely capable of understanding how to properly wield it.

STATISTICS:

Charge abilities (1x/day):
- Create ten Healing Arrows, five Lightning Arrows and two Static Arrows per day

Combat abilities:
- Magnetism: Each hit reduces target's armor class vs. ranged weapons by 1 and missile resistance by 3% for 5 rounds
- Rapid Fire: 1/2 bonus attack per round

THAC0: +3
Speed Factor: 1
Proficiency Type: Shortbow
Type: Two-handed
Requires:
 6 Strength

Weight: 2~

COPY ~%MOD_FOLDER%/items/c0auarow.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Healing Arrow~
SAY NAME2 ~Healing Arrow~
SAY DESC ~This unusual arrow, designed and crafted by Aura, deals no damage to its target, instead injecting a healing solution into their bloodstream causing their wounds to regenerate.

STATISTICS:

Combat abilities:
- Heals target for 1d6+1 hit points (does not apply Magnetism)

Damage: None
Launcher: Bow

Weight: 0~
WRITE_SHORT 0x9C ~%c0auaro1%~

COPY ~%MOD_FOLDER%/items/c0auaro2.spl~ ~override~
READ_LONG 0x64 "abil_off"
READ_SHORT 0x68 "abil_num"
SET "delta" = 0
FOR (index = 0; index < abil_num; index = index + 1) BEGIN
WRITE_SHORT (%abil_off% + (0x28 * %index%) + 0x26) ~%c0achain%~
END
COPY ~%MOD_FOLDER%/items/c0auaro2.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Aura~)
	STR_VAR
	  resource = C0Aura
END
SAY NAME1 ~Lightning Arrow~
SAY NAME2 ~Lightning Arrow~
SAY DESC ~This unusual arrow, designed and crafted by Aura, is charged with a huge amount of electricity which is released when the arrow strikes at target, electrocuting them as well as all enemies around them.

STATISTICS:

Combat abilities:
- Deals electrical damage that chains to nearby enemies, applying Magnetism (-2 penalty to AC vs. missiles and -20% missile damage resistance) to all enemies struck for five rounds

Damage: 1d6+4 electrical
Launcher: Bow

Weight: 0~
WRITE_SHORT 0x9C ~%c0auaro2%~

COPY ~%MOD_FOLDER%/items/c0auaro3.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
      match_parameter1 = 0
 parameter1 = RESOLVE_STR_REF (~Paralyzed~)
END
SAY NAME1 ~Static Arrow~
SAY NAME2 ~Static Arrow~
SAY DESC ~This unusual arrow, designed and crafted by Aura, is charged with a huge amount of electricity which is released when the arrow strikes a target, trapping them in a web-like formation.

STATISTICS:

Combat abilities:
- Target must make a save vs. death at -2 or be paralyzed and suffer from a -50% penalty to electrical resistance for five rounds.

THAC0: +2
Damage: 1d6+4 electrical
Launcher: Bow

Weight: 0~
WRITE_SHORT 0x9C ~%c0auaro3%~

COPY ~%MOD_FOLDER%/items/c0autt01.itm~ ~override~
SAY NAME1 ~Burst Orb~
SAY NAME2 ~Burst Orb~
SAY DESC ~This shimmering glass orb, roughly the size of a clenched fist, crackles with electricity.

STATISTICS:

Charge abilities (one use):
- When a Burst Orb is launched at the targeted area, it erupts into a mass of energy, dealing electrical damage and sending all targets away from the center of impact as well as knocking them unconscious for one round.
  Damage: 4d6+2 electrical
  Range: 30 ft.
  Area of Effect: 10' radius
  
Requires:
  9 Intelligence
  
Weight: 1~
WRITE_SHORT 0x9C ~%c0aburst%~

COPY ~%MOD_FOLDER%/items/c0agem1.itm~ ~override~
SAY NAME1 ~Ice Crystal~
SAY NAME2 ~Ice Crystal~
SAY DESC ~This crystal initially appears to be a normal shard of ice, though it does not melt even when held in hand. It seems to almost hum with latent magical energy.

STATISTICS:

Weight: 0~

COPY_EXISTING ~dezkie.cre~ ~override/dezkie.cre~
	PATCH_IF (SOURCE_SIZE > 0x2d3) THEN BEGIN
		ADD_CRE_ITEM ~c0agem1~ #0 #0 #0 ~NONE~ ~inv~
	END
BUT_ONLY_IF_IT_CHANGES

COPY ~%MOD_FOLDER%/items/c0autt02.spl~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Shattered~)
  END
COPY ~%MOD_FOLDER%/items/c0freeze.spl~ ~override~
      LPF ALTER_EFFECT
      INT_VAR
        check_globals     = 0
        check_headers     = 1
        match_opcode      = 142   // Display portrait icon
        match_parameter2  = 82    // Called Shot icon
        parameter2        = (icon_index + 1)
      END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Frozen~)
  END
COPY ~%MOD_FOLDER%/items/c0autt02.itm~ ~override~
SAY NAME1 ~Cryonics Rod~
SAY NAME2 ~Cryonics Rod~
SAY DESC ~This thin metallic rod contains an essence of ice, a crystal developed in the Para-Elemental Plane of Ice which somehow found its way into the Prime Material Plane. Aura used the crystal as a power source for this rod, which focuses its energy into a weaponized beam of cold capable of freezing its targets solid.

Unlike most magical wands, it is activated through pressing a button at the base of the rod instead of a magical command word, allowing it to be used by anyone.

STATISTICS:

Charge abilities (once per day):
- Launches a ray of extreme cold towards the target, dealing cold damage and freezing the target for one turn on a failed Save vs. Wands at -2. While frozen, the target suffers double damage from physical and fire damage but is immune to cold damage. After five rounds have passed or upon taking damage, the target will be Shattered, becoming unfrozen and suffering a -2 penalty to Armor Class and Strength for one turn.
  Damage: 6d6 cold (Save vs. Wand at -2 for half)
  Range: 30 ft.
  Area of Effect: 1 creature
  
Requires:
  9 Intelligence
  
Weight: 1~

COPY ~%MOD_FOLDER%/items/c0autt03.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter2 = 11
	  power = 1
	  special = RESOLVE_STR_REF (~Neera~)
	STR_VAR
	  resource = neera
END
SAY NAME1 ~Aura's Wildsurge Amplifier~
SAY NAME2 ~Aura's Wildsurge Amplifier~
SAY DESC ~This experimental device is designed by Aura to amplify the abilities of a wild mage and allow them to surge at will. It appears to do so successfully, though Neera seems none too thrilled for wearing it, as its design is less than appealing.

STATISTICS:

Charge abilities (once per day):
- Rapid Surge: For the next round, the wearer may cast without delay and has casting time reduced by 4. However, every spell cast during this time will incur a wild surge.

Equipped abilities:
- +10% probability that a wild surge will have positive effect
- +2 bonus 1st level spells

Weight: 0~

COPY ~%MOD_FOLDER%/items/c0autt04.itm~ ~override~
SAY NAME1 ~Aura's Invisibility Device~
SAY NAME2 ~Aura's Invisibility Device~
SAY DESC ~This unusual looking metal device appears to function like a wand, except that it is activated through the push of a button rather than a command word, allowing anyone to use it with ease. When activated, it releases a shimmering sphere of light which envelops the user and <PRO_HISHER> allies, turning them invisible. It has apparently seen frequent use, as Aura claimed to have used it to evade bandits during her travels.

STATISTICS:

Charge abilities:
- Causes all allied creatures within the radius to turn invisible
  Range: Self
  Radius: 30'
  Duration: 10 turns
 
Weight: 1~

COPY ~%MOD_FOLDER%/items/c0bandol.itm~ ~override~
SAY NAME1 ~Bandolier~
SAY NAME2 ~Bandolier~
SAY DESC ~This bandolier was designed by Aura to safely carry firebombs and explosives of all kinds.

STATISTICS:

Capacity: 100

Weight: 0~

COPY ~%MOD_FOLDER%/items/c0bandol.sto~ ~override~
SAY 0xc ~Bandolier~

COPY ~%MOD_FOLDER%/items/c0abomb1.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Green Flaming Oil~
SAY DESC ~Inside of this glass pot is an expensive mixture of oil and other chemicals. When this mixture is set ablaze, it burns for several seconds at a very hot temperature.  Flaming oil is sometimes difficult to use because it takes a long time for the user to properly throw it. Adventurers often carry oil with them to deal with trolls in the unfortunate event that they are encountered.

Aura's flasks use a specially-made type of oil which releases a highly flammable gas. The flames are emerald green, just like the oil itself.

STATISTICS:

When thrown, releases a cloud which deals 2d3 fire damage per round to all creatures within it (save vs. breath weapons at -2 for half). The cloud lasts for five rounds.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj2%~
WRITE_LONG 0x34 250

COPY ~%MOD_FOLDER%/items/c0abomb2.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~White Flashbomb~
SAY DESC ~This flask contains an alchemical compound which, when detonated, explodes with a flash of light that stuns and blinds all within the vicinity.

STATISTICS

When thrown, deals 2d4 non-lethal damage and blinds all creatures within a 10' radius for five rounds on a failed save vs. breath weapons. Additionally, argets who fail a save vs. breath weapons at +2 are stunned for two rounds.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj3%~
WRITE_LONG 0x34 750

COPY ~%MOD_FOLDER%/items/c0abomb3.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Spiked Firebomb~
SAY DESC ~This spiked metal object is an explosive which unleashes a fiery blast while launching sharp metal shrapnel at anyone within a certain range of it.

STATISTICS

When thrown, deals 1d6+5 fire and 1d6+5 piercing damage within a 10' radius and causes targets to bleed for 2 points of piercing damage every round for five rounds on a failed save vs. breath weapons.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj4%~
WRITE_LONG 0x34 750

COPY ~%MOD_FOLDER%/items/c0abomb4.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Sulfide Bomb~
SAY DESC ~This explosive contains a huge amount of sulfur, which when released creates a cloud of foul-smelling and toxic fumes that can knock out a man within seconds.

STATISTICS

When thrown, releases a cloud for three rounds which deals 2d6 poison damage per round and knocks all targets unconscious for five rounds on a failed save vs. breath weapons.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj5%~
WRITE_LONG 0x34 1000

COPY ~%MOD_FOLDER%/items/c0abomb5.itm~ ~override~
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
 parameter1 = RESOLVE_STR_REF (~Blinded~)
END
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Crimson Smoke Canister~
SAY DESC ~This round tube, when thrown, releases a thick cloud of crimson-colored toxic smoke which impairs vision and physically weakens all creatures that breathe it.

STATISTICS

When thrown, releases a cloud for one turn which deals 4 poison damage per round. Creatures standing in the cloud must make an initial save vs. breath weapons at -2 or become blinded. Creatures must additionally make a save vs. breath weapons each round at -4 or suffer a penalty of 2 points to Armor Class, THAC0 and Constitution for three rounds.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj6%~
WRITE_LONG 0x34 1200

COPY ~%MOD_FOLDER%/items/c0abomb6.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Adhesive Bomb~
SAY DESC ~This canister contains a substance which rapidly congeals when exposed to air, becoming a burning hot and sticky glue which impairs the movements of those within its vicinity.

STATISTICS

When thrown, deals 2d8 fire damage and slows all targets for three rounds on a failed save vs. breath weapons at -2. The glue remains on the ground for three rounds before dissolving.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj7%~
WRITE_LONG 0x34 1500

COPY ~%MOD_FOLDER%/items/c0abomb7.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Corrosive Bomb~
SAY DESC ~This canister contains a heavily acidic substance which bursts into a cloud of corrosive acid when detonated, dealing severe injury to anyone unfortunate enough to stand within the vicinity.

STATISTICS

When thrown, releases an acidic cloud which deals 2d10 acid damage each turn. Enemies standing within the cloud suffer a -50% penalty to physical damage resistance. The cloud remains for five rounds.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj8%~
WRITE_LONG 0x34 2500

COPY ~%MOD_FOLDER%/items/c0aburn.spl~ ~override~
      LPF ALTER_EFFECT
      INT_VAR
        check_globals     = 0
        check_headers     = 1
        match_opcode      = 142   // Display portrait icon
        match_parameter2  = 82    // Called Shot icon
        parameter2        = (icon_index + 3)
      END
  LPF ALTER_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      match_opcode = 139 // display string
	  parameter1 = RESOLVE_STR_REF (~Burning~)
  END
COPY ~%MOD_FOLDER%/items/c0abomb8.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Dread Flame Bomb~
SAY DESC ~This canister contains a powder made from a hybrid of glow powder and Shou explosive powder. The purple flames that burst from the explosive deal horrifying damage and inflict terror in any survivors.

STATISTICS

When thrown, unleashes a fireball that deals 8d8 fire damage. Victims have their total fire resistance halved for one turn and must make a save vs. breath weapons at -6 or become ignited, suffering 10% of their maximum hit points each round and fleeing in terror for five rounds.

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj9%~
WRITE_LONG 0x34 3500

COPY ~%MOD_FOLDER%/items/c0abomb9.itm~ ~override~
  LPF ADD_ITEM_EQEFFECT
    INT_VAR
      opcode = 319
	  target = 1
	  timing = 2
	  parameter1 = (IDS_OF_SYMBOL (~kit~ ~C0AURA~))
	  parameter2 = 9
	  power = 1
	  special = RESOLVE_STR_REF (~Artificer~)
END
SAY NAME1 ~Firebomb~
SAY NAME2 ~Yin-Yang Bomb~
SAY DESC ~This devastating explosive contains a special compound crafted from smokepowder, arcane magic, and Kozakuran divine incantations. The powerful magic within the explosive is somehow partially sentient, as it is intended to shift the world towards equilibrium. Those with discord in their hearts suffer extreme damage while those in perfect harmony will feel a mere shock.

STATISTICS

When thrown, unleashes a multicolored explosion which deals 2d6 magical damage and an additional amount of variant damage depending on the target's alignment (save vs. breath weapons to take half additional damage) and apply an additional effect for five rounds:
  vs. True Neutral: no bonus damage or effect
  vs. Chaotic: +6d6 fire damage, -20% damage dealt
  vs. Lawful: +6d6 cold damage, -2 Armor Class
  vs. Good: +6d6 acid damage, +20% all resistances
  vs. Evil: +6d6 electrical damage, -2 Saving Throws

Weight: 0~
WRITE_SHORT 0x9C ~%c0aproj0%~
WRITE_LONG 0x34 4000

COPY_EXISTING ~scrl2j.itm~ ~override/c0ascrl1.itm~
SAY NAME1 ~Strange Letter~
SAY NAME2 ~Strange Letter~
SAY UNIDENTIFIED_DESC ~This letter was left behind on the bodies of one of the elite ninja sent to capture Aura.

"Our quarry has entered into our domain. Seek her out and kill all who try to stand in your way. Capture her alive if possible, but if she chooses to resist, do not hesitate to eliminate her. When the task is complete, raise the signal at the city's bridge during the midnight hour and await my arrival.

Remember the oaths you have sworn and know that your success will free us from the curse of which we have been bound. Do not fail me."~

COPY_EXISTING ~scrl2j.itm~ ~override/c0ascrl2.itm~
SAY NAME1 ~Note~
SAY NAME2 ~Note~
SAY UNIDENTIFIED_DESC ~This hastily-scribbled note was left behind by Aura.

"Thank you for everything we've done together, but I can't ask you to fight this battle for my sake. Hopefully I'll make it back, but if I don't... please don't miss me."~

COPY_EXISTING ~misc1c.itm~ ~override/c0ascrl3.itm~
SAY NAME1 ~Scroll~
SAY NAME2 ~Fubuki's Records~
SAY UNIDENTIFIED_DESC ~This heavy scroll's contents are written entirely in Kara-Turan. According to Aura, they contain several years' worth of Fubuki's gathered records and information on past events involving Tadahashi Saito's war against the holy temples of Kozakura.~

COPY ~%MOD_FOLDER%/items/c0amask1.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0amask1.itm~ ~override~
SAY NAME1 ~Oni Mask~
SAY NAME2 ~Oni Mask~
SAY DESC ~This ceramic mask is a depiction of an oni, a terrifying demonic spirit from Kozakura. Its mere appearance is capable of instilling dread within those who look upon it.

STATISTICS:

Equipped abilities:
- Armor Class: +1
- Wisdom: +1
- Charisma: -2
- All enemies within 5 ft of the wearer suffer a -1 penalty to THAC0, damage, armor class and all saving throws.

Weight: 1~

COPY ~%MOD_FOLDER%/items/c0aclub1.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0aclub1.itm~ ~override~
      LPF ALTER_EFFECT
      INT_VAR
        check_globals     = 0
        check_headers     = 1
        match_opcode      = 142   // Display portrait icon
        match_parameter2  = 82    // Called Shot icon
        parameter2        = (icon_index + 3)
      END
SAY NAME1 ~Onibi-no-kozuchi +2~
SAY NAME2 ~Onibi-no-kozuchi +2~
SAY DESC ~This heavy bludgeon is known as a kanabo, a spiked club wielded by warriors of Kara-Tur. The jagged cracks and bloodstains on the hard laquered wood suggest a past history of warfare and bloodshed. Its former owner, the violent warrior priest Kagutsuchi, enhanced it with the power of fire magic and fury.

STATISTICS:

Combat abilities:
- Each hit has a 20% chance to inflict the target with Burning Thorns, dealing 1d6 immediate piercing damage and an additional point of fire damage every round for three rounds.

Equipped abilities:
- When the wielder falls below 50% maximum hit points, <PRO_HESHE> gains a +2 bonus to damage but a -2 penalty to Armor Class.

THAC0: +2
Damage: 1d6+2, +1d4 fire damage
Damage type: crushing
Speed Factor: 4
Proficiency Type: Club
Type: One-handed
Requires:
 5 Strength

Weight: 3~

COPY ~%MOD_FOLDER%/items/c0auswfa.itm~ ~override~
SAY NAME1 ~Katana~
SAY NAME2 ~Masterwork Katana~
SAY DESC ~This katana was designed by Aura for her former friend, Tadahashi Saito, an exiled Kozakuran samurai. With the samurai slain, what Aura intends to do with the sword is unknown.

Weight: 4~

COPY ~%MOD_FOLDER%/items/c0ausw01.itm~ ~override~
SAY NAME1 ~Katana~
SAY NAME2 ~Blade of Howling Souls +2~
SAY UNIDENTIFIED_DESC ~The katana is a single-edged, slightly curved sword that ends with a chisel point. The katana is perhaps one of the finest swords ever made, the steps to its creation a long and secret process that is more art form than anything else. This blade is an important facet of Kara-Turan culture. To touch or wield a samurai's katana is to insult the samurai and to incite his wrath. For a gaijin, or foreigner, to own such a blade is a rare occurrence. Either the gaijin is a greatly honored friend of an important minister, or the gaijin has murdered a samurai.

STATISTICS:

Damage: 1d10 (slashing)
Speed Factor: 4
Proficiency Type: Katana
Type: One-handed
Requires:
 6 Strength
 16 Dexterity
 14 Intelligence

Weight: 6~
SAY DESC ~This masterwork katana, claimed to be blessed by a Kara-Turan deity, was the finest creation of Aura, yet its history is a gruesome one stained with the blood of countless innocents. Although at first glance it appears to simply be a standard yet flawless blade, a wielder that is aware of its secret may reshape it to function as a deadly throwing weapon.

STATISTICS:

Combat abilities:
- Returns to the wielder's hand when thrown
- Disarm: 10% chance (40% chance in melee) to disarm opponent, reducing their attacks per round to 0 for 1 round (save vs. death to avoid)

Equipped abilities:
- 1/2 extra attack per round

THAC0: +2
Damage (melee): 1d10+2
Damage (ranged): 1d4+2
Damage type: slashing
Speed Factor: 2
Proficiency Type: Katana
Type: One-handed
Requires:
 6 Strength
 16 Dexterity
 14 Intelligence

Weight: 4~
SAY 0x1D6 ~Disarmed~
SAY 0x206 ~Disarmed~

COPY ~%MOD_FOLDER%/items/c0ausw02.itm~ ~override~
SAY NAME1 ~Wakizashi~
SAY NAME2 ~Jin'u +1~
SAY UNIDENTIFIED_DESC ~The wakizashi, or companion sword, is extremely important to samurai. It is worn at all times, even indoors, and is near the samurai when he sleeps at night. As finely made as the katana, the wakizashi, a shorter sword with a length between twelve and twenty-four inches, is a dangerous weapon in the hands of a skilled user.

STATISTICS:

Damage: 1d8 (piercing)
Speed Factor: 3
Proficiency Type: Scimitar/Wakizashi/Ninja-to
Type: One-handed
Requires:
 5 Strength

Weight: 3~
SAY DESC ~This wakizashi has a blade sharper and finer than any other weapon you have seen, as though the slightest touch from its edge could sever steel. Its lightness and fine balance is only matched by its powerful enchantments and its beauty, decorated with faint etchings on the blade that resemble a strange hybrid of birds and clouds.

According to Aura, the sword's name roughly translates to 'Swift Wing'.

STATISTICS:

Combat abilities:
- Critical Hit Chance: +5%

Equipped abilities:
- Dexterity: +1
- Movement Rate: +2

THAC0: +1
Damage: 1d8+3 (piercing)
Speed Factor: 2
Proficiency Type: Scimitar/Wakizashi/Ninja-to
Type: One-handed
Requires:
 5 Strength

Weight: 2~

COPY ~%MOD_FOLDER%/items/c0akat01.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0akat02.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0akat03.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0ausw03.spl~ ~override~
  LPF ADD_SPELL_EFFECT
    INT_VAR
      check_globals = 1
      check_headers = 1
      opcode = 139 // display string
	  target = 2
	  parameter1 = RESOLVE_STR_REF (~Disarmed~)
	  savingthrow = 4
	  savebonus = %-2%
  END
COPY ~%MOD_FOLDER%/items/c0ausw03.itm~ ~override~
SAY NAME1 ~Katana~
SAY NAME2 ~Han'men-Akatsuki +5~
SAY DESC ~This flawless katana is the epitome of Kara-Turan swordsmithing. Forged out of a sheet of pure, red-colored steel folded upon itself a million times, its fine balance and a razor-sharp edge that never fades makes it a truly unparalleled weapon among its kind. The wielder of this katana can almost feel guided by its natural motions, guiding the blade as it weaves and flows, striking lethal blows over and over again.

STATISTICS:

Combat abilities:
- Every third successful attack is a guaranteed critical hit (resets after one round of not attacking)
- Wielder's weapon speed factor is decreased by one for two rounds on each successful hit
- On a critical hit, disarms opponent unless a save vs. death at -2 is made. Disarmed opponents are unable to attack for one round.
- 2% chance to slay target instantly on hit (chances are doubled on a critical hit) unless a save vs. death is made.

Equipped abilities:
- Armor Class: +5 vs. melee weapons

THAC0: +5
Damage: 1d10+1 (slashing)
Speed Factor: 5
Proficiency Type: Katana
Type: One-handed
Requires:
 6 Strength
 18 Dexterity
 15 Intelligence

Weight: 4~

COPY ~%MOD_FOLDER%/items/c0auim01.itm~ ~override~
SAY NAME1 ~Two-handed Sword~
SAY NAME2 ~Two-handed Sword, Cursed Berserking +3~
SAY DESC ~This is a cursed sword which performs perfectly under every test, save the heat of battle. Upon entering combat, the wielder will immediately go berserk, killing everything within reach until either calming down or falling unconscious. A very powerful sword, but one must decide whether or not it is worth the risk. Even once the battle fury has ended, this sword can only be removed via an exorcism using a Remove Curse spell.

Aura's enhancements to the weapon were unsuccessful in removing the curse, but somewhat successful in suppressing the rage that overcomes the wielder... at least, so long as they retain the physical and mental fortitude to hold it back. Should they allow the fury to overwhelm them, they would gain incredible strength from the unleashed power... but at a risky cost.

STATISTICS:

Equipped abilities:
- May only be removed with a Remove Curse spell
- When below 50% maximum health, the wielder must make a save vs. spell at -4 every round or go berserk, gaining +2 to Strength and +4 to damage rolls but reducing armor class by 2. Additionally, the wielder loses 1d4 hit points per round for as long as they remain enraged.

THAC0: +1
Damage: 1d10+1 (slashing)
Speed Factor: 7
Proficiency Type: Two-handed Sword
Type: Two-handed
Requires:
 14 Strength

Weight: 15~

COPY ~%MOD_FOLDER%/items/c0auim02.itm~ ~override~
SAY NAME1 ~Longbow~
SAY NAME2 ~The Killing Shot +3~
SAY DESC ~Longbow of Marksmanship: The Killing Shot
Driven by years of rivalry, the dukes of Spandeliyon and Delthuntle decided to organize a private contest that would proclaim the better archer between them. Both boasted the power of their magical bows, but that wasn't enough for Edwall Dest, Duke of Spandeliyon. He arranged for the theft of his opponent's bow, and on the day of the contest, he couldn't help gloat in his advantage. The Duke of Delthuntle, known only as Raymond, demanded a demonstration of Edwall's skill on a scarecrow that he had placed. Edwall Dest drew his longbow and released the arrow with determination, not stopping to think how uncannily the target resembled himself. The missile split the large voodoo doll's head in twain, and at that moment, Edwall's head did much the same.

Aura's enhancements to the weapon include reshaping it into a composite weapon and adding several strange attachments. The bow has become significantly heavier and more difficult to draw as a consequence, but now fires mighty shots capable of shattering the most sturdy of defenses.

STATISTICS:

Combat abilities:
- Sets attacks per round to 1
- Critical Hit Chance: +10% (this weapon)

Equipped ability:
- Increased vision range

THAC0: +6
Damage: +1 (plus Strength bonus)
Speed Factor: 9
Proficiency Type: Longbow
Type: Two-handed
Requires:
 17 Strength

Weight: 8~

COPY ~%MOD_FOLDER%/items/c0auim03.itm~ ~override~
SAY NAME1 ~Quarterstaff~
SAY NAME2 ~Silver Staff Mace +2~
SAY DESC ~This weapon appears to be a normal large walking staff, but it has a faint aura of alteration magic. Uttering the command word causes the staff to assume the attributes of a mace, allowing it to be wielded with one hand. This was likely designed for Clerics or Druids, though that does not preclude use by most others.

Aura's enhancements have coated the Staff Mace with a plating of pure silver from the Werebane dagger, making it an effective weapon against lycanthropes.

STATISTICS:

THAC0: +2, +5 vs. lycanthropes
Damage: 2d4+2, +5 vs. lycanthropes
Damage type: Crushing
Speed Factor: 2
Proficiency Type: Quarterstaff
Type: One-handed
Requires:
 3 Strength

Weight: 5~

COPY ~%MOD_FOLDER%/items/c0auim04.itm~ ~override~
SAY NAME1 ~Idol~
SAY NAME2 ~Idol of Kozah~
SAY DESC ~This idol depicts Kozah the Stormstar, a long-extinct god who was venerated and feared among the less-powerful strata of ancient Netherese society. Worship of this god of storms, earthquakes, strife, and rebellion was outlawed by many of the civilization's powerful archwizards. Many Kozahyn shrines and temples were therefore built in secretive, underground locations where the devout were better able to escape detection.

Aura's tinkering has somehow awakened a part of the power that lingers within the idol, making it a useful magical item. While held in one's hand, the idol can call down bolts of lightning from the sky to strike down enemies around them or create a Storm Shield around the bearer. However, the bearer's mind is wearied from constant battling against the rage induced by holding the idol close.

STATISTICS:

Charge abilities:
- Call Lightning three times per day
- Storm Shield once per day

Equipped abilities:
- May only be removed with a Remove Curse spell
- Wearer is immune to lightning strikes, Call Lightning and Lightning Bolt
- Electricity Resistance: +20%
- All electrical damage inflicted by the wearer is increased by 15%
- Save vs. Spells: -3 penalty

Weight: 1~

COPY ~%MOD_FOLDER%/items/c0auim05.itm~ ~override~
SAY NAME1 ~Quarterstaff~
SAY NAME2 ~The Ossifier~
SAY DESC ~Cursed Staff of Petrification: The Ossifier
The surface of this seven-foot shaft more resembles stone than wood, but in the hands of a skilled wielder it weighs little more than a staff of oak. Along its length appear the ghost-like images of various foes caught in defensive postures, appearing almost as thought they had been suddenly turned to stone.

Aura's enhancements have managed to turn the cursed weapon into something more beneficial, albeit still largely useless.

STATISTICS:

Equipped abilities:
- May only be removed by a Remove Curse spell
- Stoneskin on user when equipped (five skins, re-applied upon re-equipping)
- Barkskin (base AC set to 6)

Combat abilities:
- 1% chance to petrify target on strike on a failed save vs. spell

Damage: 1d6 (crushing)
Speed Factor: 4
Proficiency Type: Quarterstaff
Type: Two-handed
Requires:
 5 Strength

Weight: 4~

COPY ~%MOD_FOLDER%/items/c0auim06.spl~ ~override~
COPY ~%MOD_FOLDER%/items/c0auim06.itm~ ~override~
SAY NAME1 ~Two-handed Sword~
SAY NAME2 ~Gold Miner +3~
SAY DESC ~Crafted by dwarves in service to the temple of Waukeen in Amn, this two-handed sword draws power from the gold in its wielder's purse. For the wealthy it strikes mighty blows. For the impoverished, the Gold Digger is no better than a mundane greatsword.

Aura's enhancements have somehow managed to reverse-engineer the weapon's enchantments, causing large showers of gold coins to burst from the bodies of the fallen and starting a gold frenzy in the wielder, urging them to kill more quickly.

STATISTICS:

Special:
- Consumes 10 gold per successful hit
- Upon killing a target, gain 100 gold and deal +4 melee damage for the next round.

THAC0: +3
Damage: 1d10+4 (slashing)
Speed Factor: 9
Proficiency Type: Two-handed Sword
Type: Two-handed
Requires:
 14 Strength

Weight: 15~